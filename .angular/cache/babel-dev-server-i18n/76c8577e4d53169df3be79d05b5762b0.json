{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { NavigationEnd } from '@angular/router';\nimport { cloneDeep } from 'lodash-es';\nimport { take } from 'rxjs/operators';\nimport { CounteinersDetailsDialogComponent } from './counteiners-details.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./countiners.service\";\nimport * as i3 from \"../genral.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../components/dynamic-form/dynamic-form.component\";\n\nfunction CountinersArrivalComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"dynamic-form\", 1);\n    i0.ɵɵlistener(\"submitForm\", function CountinersArrivalComponent_div_0_Template_dynamic_form_submitForm_1_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.submit($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"putData\", ctx_r0.putData)(\"fields\", ctx_r0.regConfig);\n  }\n}\n\nexport class CountinersArrivalComponent {\n  constructor(router, _Activatedroute, cdRef, localService, genral, dialog) {\n    this.router = router;\n    this._Activatedroute = _Activatedroute;\n    this.cdRef = cdRef;\n    this.localService = localService;\n    this.genral = genral;\n    this.dialog = dialog;\n    this.putData = null;\n    this.isDataAvailable = false;\n  }\n\n  ngOnInit() {\n    this.regConfig = [{\n      type: 'date',\n      label: \"arrival date\",\n      value: 'timeNow',\n      name: 'recordedTime',\n      options: 'withTime'\n    }, {\n      type: 'select',\n      label: \"Product company\",\n      name: 'productCompany',\n      options: this.localService.getShippingSuppliers()\n    }, {\n      type: 'bignotexpand',\n      label: \"Shiping details\",\n      name: 'shipingDetails',\n      value: 'required',\n      collections: [{\n        type: 'input',\n        label: \"Vessel\",\n        name: 'vessel'\n      }, {\n        type: 'input',\n        label: \"Shipping company\",\n        name: 'shippingCompany'\n      }, {\n        type: 'select',\n        label: \"Loading port\",\n        name: 'portOfLoading',\n        options: this.localService.getShippingPorts(),\n        validations: [{\n          name: 'required',\n          validator: Validators.required,\n          message: \"Loading port Required\"\n        }]\n      }, {\n        type: 'date',\n        label: \"Etd\",\n        name: 'etd'\n      }, {\n        type: 'select',\n        label: \"Destination port\",\n        name: 'portOfDischarge',\n        options: this.localService.getShippingPorts()\n      }, {\n        type: 'date',\n        label: \"Eta\",\n        name: 'eta'\n      }, {\n        type: 'divider',\n        inputType: 'divide'\n      }]\n    }, {\n      type: 'bignotexpand',\n      label: \"Container details\",\n      name: 'containerDetails',\n      collections: [{\n        type: 'input',\n        label: \"Container number\",\n        name: 'containerNumber',\n        validations: [{\n          name: 'required',\n          validator: Validators.required,\n          message: \"Container number Required\"\n        }]\n      }, {\n        type: 'input',\n        label: \"Seal number\",\n        name: 'sealNumber',\n        validations: [{\n          name: 'required',\n          validator: Validators.required,\n          message: \"Seal number Required\"\n        }]\n      }, {\n        type: 'selectNormal',\n        label: \"Container type\",\n        name: 'containerType',\n        //   value: '20\\'',\n        options: this.genral.getShippingContainerType(),\n        validations: [{\n          name: 'required',\n          validator: Validators.required,\n          message: \"Container type Required\"\n        }]\n      }]\n    }, {\n      type: 'button',\n      label: \"Submit\",\n      name: 'submit'\n    }];\n\n    this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n      if (params.get('id')) {\n        var id = +params.get('id');\n        this.localService.getContainerArrival(id).pipe(take(1)).subscribe(val => {\n          this.putData = val;\n          this.isDataAvailable = true;\n        });\n      } else {\n        this.isDataAvailable = true;\n      }\n    });\n\n    this.navigationSubscription = this.router.events.subscribe(e => {\n      // If it is a NavigationEnd event re-initalise the component\n      if (e instanceof NavigationEnd) {\n        this.isDataAvailable = false;\n        this.putData = null;\n        this.cdRef.detectChanges();\n        this.isDataAvailable = true;\n      }\n    });\n  }\n\n  submit(value) {\n    const fromNew = this.putData === null || this.putData === undefined;\n    this.localService.addEditContainerArrival(value, fromNew).pipe(take(1)).subscribe(val => {\n      const dialogRef = this.dialog.open(CounteinersDetailsDialogComponent, {\n        width: '80%',\n        data: {\n          loading: cloneDeep(val),\n          fromNew: true,\n          type: 'Arrivals'\n        }\n      });\n      dialogRef.afterClosed().subscribe(data => {\n        if (data === \"Edit\") {\n          this.putData = val;\n          this.isDataAvailable = false;\n          this.cdRef.detectChanges();\n          this.isDataAvailable = true;\n        } else {\n          this.router.navigate(['../CountinerReports'], {\n            relativeTo: this._Activatedroute\n          });\n        }\n      });\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.navigationSubscription) {\n      this.navigationSubscription.unsubscribe();\n    }\n  }\n\n}\n\nCountinersArrivalComponent.ɵfac = function CountinersArrivalComponent_Factory(t) {\n  return new (t || CountinersArrivalComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.CountinersService), i0.ɵɵdirectiveInject(i3.Genral), i0.ɵɵdirectiveInject(i4.MatDialog));\n};\n\nCountinersArrivalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CountinersArrivalComponent,\n  selectors: [[\"countiners-arrival\"]],\n  decls: 1,\n  vars: 1,\n  consts: function () {\n    let i18n_0;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_6771703354455644964$$SRC_APP_COUNTINERS_COUNTINERS_ARRIVAL_COMPONENT_TS__1 = goog.getMsg(\"Countiners arrival\");\n      i18n_0 = MSG_EXTERNAL_6771703354455644964$$SRC_APP_COUNTINERS_COUNTINERS_ARRIVAL_COMPONENT_TS__1;\n    } else {\n      i18n_0 = \"Countiners arrival\";\n    }\n\n    return [[4, \"ngIf\"], [\"mainLabel\", i18n_0, 3, \"putData\", \"fields\", \"submitForm\"]];\n  },\n  template: function CountinersArrivalComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CountinersArrivalComponent_div_0_Template, 2, 2, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.isDataAvailable);\n    }\n  },\n  directives: [i5.NgIf, i6.DynamicFormComponent],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/isral/OneDrive/Documents/AVC-FRONT/src/app/countiners/countiners-arrival.component.ts"],"names":["Validators","NavigationEnd","cloneDeep","take","CounteinersDetailsDialogComponent","i0","i1","i2","i3","i4","i5","i6","CountinersArrivalComponent_div_0_Template","rf","ctx","_r2","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","CountinersArrivalComponent_div_0_Template_dynamic_form_submitForm_1_listener","$event","ɵɵrestoreView","ctx_r1","ɵɵnextContext","submit","ɵɵelementEnd","ctx_r0","ɵɵadvance","ɵɵproperty","putData","regConfig","CountinersArrivalComponent","constructor","router","_Activatedroute","cdRef","localService","genral","dialog","isDataAvailable","ngOnInit","type","label","value","name","options","getShippingSuppliers","collections","getShippingPorts","validations","validator","required","message","inputType","getShippingContainerType","paramMap","pipe","subscribe","params","get","id","getContainerArrival","val","navigationSubscription","events","e","detectChanges","fromNew","undefined","addEditContainerArrival","dialogRef","open","width","data","loading","afterClosed","navigate","relativeTo","ngOnDestroy","unsubscribe","ɵfac","CountinersArrivalComponent_Factory","t","ɵɵdirectiveInject","Router","ActivatedRoute","ChangeDetectorRef","CountinersService","Genral","MatDialog","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","i18n_0","ngI18nClosureMode","MSG_EXTERNAL_6771703354455644964$$SRC_APP_COUNTINERS_COUNTINERS_ARRIVAL_COMPONENT_TS__1","goog","getMsg","template","CountinersArrivalComponent_Template","ɵɵtemplate","directives","NgIf","DynamicFormComponent","encapsulation"],"mappings":"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","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport { NavigationEnd } from '@angular/router';\r\nimport { cloneDeep } from 'lodash-es';\r\nimport { take } from 'rxjs/operators';\r\nimport { CounteinersDetailsDialogComponent } from './counteiners-details.component';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"./countiners.service\";\r\nimport * as i3 from \"../genral.service\";\r\nimport * as i4 from \"@angular/material/dialog\";\r\nimport * as i5 from \"@angular/common\";\r\nimport * as i6 from \"../components/dynamic-form/dynamic-form.component\";\r\nfunction CountinersArrivalComponent_div_0_Template(rf, ctx) { if (rf & 1) {\r\n    const _r2 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵelementStart(1, \"dynamic-form\", 1);\r\n    i0.ɵɵlistener(\"submitForm\", function CountinersArrivalComponent_div_0_Template_dynamic_form_submitForm_1_listener($event) { i0.ɵɵrestoreView(_r2); const ctx_r1 = i0.ɵɵnextContext(); return ctx_r1.submit($event); });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"putData\", ctx_r0.putData)(\"fields\", ctx_r0.regConfig);\r\n} }\r\nexport class CountinersArrivalComponent {\r\n    constructor(router, _Activatedroute, cdRef, localService, genral, dialog) {\r\n        this.router = router;\r\n        this._Activatedroute = _Activatedroute;\r\n        this.cdRef = cdRef;\r\n        this.localService = localService;\r\n        this.genral = genral;\r\n        this.dialog = dialog;\r\n        this.putData = null;\r\n        this.isDataAvailable = false;\r\n    }\r\n    ngOnInit() {\r\n        this.regConfig = [\r\n            {\r\n                type: 'date',\r\n                label: $localize `arrival date`,\r\n                value: 'timeNow',\r\n                name: 'recordedTime',\r\n                options: 'withTime',\r\n            },\r\n            {\r\n                type: 'select',\r\n                label: $localize `Product company`,\r\n                name: 'productCompany',\r\n                options: this.localService.getShippingSuppliers(),\r\n            },\r\n            {\r\n                type: 'bignotexpand',\r\n                label: $localize `Shiping details`,\r\n                name: 'shipingDetails',\r\n                value: 'required',\r\n                collections: [\r\n                    {\r\n                        type: 'input',\r\n                        label: $localize `Vessel`,\r\n                        name: 'vessel',\r\n                    },\r\n                    {\r\n                        type: 'input',\r\n                        label: $localize `Shipping company`,\r\n                        name: 'shippingCompany',\r\n                    },\r\n                    {\r\n                        type: 'select',\r\n                        label: $localize `Loading port`,\r\n                        name: 'portOfLoading',\r\n                        options: this.localService.getShippingPorts(),\r\n                        validations: [\r\n                            {\r\n                                name: 'required',\r\n                                validator: Validators.required,\r\n                                message: $localize `Loading port Required`,\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        type: 'date',\r\n                        label: $localize `Etd`,\r\n                        name: 'etd',\r\n                    },\r\n                    {\r\n                        type: 'select',\r\n                        label: $localize `Destination port`,\r\n                        name: 'portOfDischarge',\r\n                        options: this.localService.getShippingPorts(),\r\n                    },\r\n                    {\r\n                        type: 'date',\r\n                        label: $localize `Eta`,\r\n                        name: 'eta',\r\n                    },\r\n                    {\r\n                        type: 'divider',\r\n                        inputType: 'divide'\r\n                    },\r\n                ],\r\n            },\r\n            {\r\n                type: 'bignotexpand',\r\n                label: $localize `Container details`,\r\n                name: 'containerDetails',\r\n                collections: [\r\n                    {\r\n                        type: 'input',\r\n                        label: $localize `Container number`,\r\n                        name: 'containerNumber',\r\n                        validations: [\r\n                            {\r\n                                name: 'required',\r\n                                validator: Validators.required,\r\n                                message: $localize `Container number Required`,\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        type: 'input',\r\n                        label: $localize `Seal number`,\r\n                        name: 'sealNumber',\r\n                        validations: [\r\n                            {\r\n                                name: 'required',\r\n                                validator: Validators.required,\r\n                                message: $localize `Seal number Required`,\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        type: 'selectNormal',\r\n                        label: $localize `Container type`,\r\n                        name: 'containerType',\r\n                        //   value: '20\\'',\r\n                        options: this.genral.getShippingContainerType(),\r\n                        validations: [\r\n                            {\r\n                                name: 'required',\r\n                                validator: Validators.required,\r\n                                message: $localize `Container type Required`,\r\n                            }\r\n                        ]\r\n                    },\r\n                ],\r\n            },\r\n            {\r\n                type: 'button',\r\n                label: $localize `Submit`,\r\n                name: 'submit',\r\n            }\r\n        ];\r\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n            if (params.get('id')) {\r\n                var id = +params.get('id');\r\n                this.localService.getContainerArrival(id).pipe(take(1)).subscribe(val => {\r\n                    this.putData = val;\r\n                    this.isDataAvailable = true;\r\n                });\r\n            }\r\n            else {\r\n                this.isDataAvailable = true;\r\n            }\r\n        });\r\n        this.navigationSubscription = this.router.events.subscribe((e) => {\r\n            // If it is a NavigationEnd event re-initalise the component\r\n            if (e instanceof NavigationEnd) {\r\n                this.isDataAvailable = false;\r\n                this.putData = null;\r\n                this.cdRef.detectChanges();\r\n                this.isDataAvailable = true;\r\n            }\r\n        });\r\n    }\r\n    submit(value) {\r\n        const fromNew = this.putData === null || this.putData === undefined;\r\n        this.localService.addEditContainerArrival(value, fromNew).pipe(take(1)).subscribe(val => {\r\n            const dialogRef = this.dialog.open(CounteinersDetailsDialogComponent, {\r\n                width: '80%',\r\n                data: { loading: cloneDeep(val), fromNew: true, type: 'Arrivals' }\r\n            });\r\n            dialogRef.afterClosed().subscribe(data => {\r\n                if (data === $localize `Edit`) {\r\n                    this.putData = val;\r\n                    this.isDataAvailable = false;\r\n                    this.cdRef.detectChanges();\r\n                    this.isDataAvailable = true;\r\n                }\r\n                else {\r\n                    this.router.navigate(['../CountinerReports'], { relativeTo: this._Activatedroute });\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n    }\r\n}\r\nCountinersArrivalComponent.ɵfac = function CountinersArrivalComponent_Factory(t) { return new (t || CountinersArrivalComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.CountinersService), i0.ɵɵdirectiveInject(i3.Genral), i0.ɵɵdirectiveInject(i4.MatDialog)); };\r\nCountinersArrivalComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CountinersArrivalComponent, selectors: [[\"countiners-arrival\"]], decls: 1, vars: 1, consts: function () { let i18n_0; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_6771703354455644964$$SRC_APP_COUNTINERS_COUNTINERS_ARRIVAL_COMPONENT_TS__1 = goog.getMsg(\"Countiners arrival\");\r\n        i18n_0 = MSG_EXTERNAL_6771703354455644964$$SRC_APP_COUNTINERS_COUNTINERS_ARRIVAL_COMPONENT_TS__1;\r\n    }\r\n    else {\r\n        i18n_0 = $localize `:␟769cb3e59c7042a51bf3dc22fe0ee56b3008a214␟6771703354455644964:Countiners arrival`;\r\n    } return [[4, \"ngIf\"], [\"mainLabel\", i18n_0, 3, \"putData\", \"fields\", \"submitForm\"]]; }, template: function CountinersArrivalComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, CountinersArrivalComponent_div_0_Template, 2, 2, \"div\", 0);\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isDataAvailable);\r\n    } }, directives: [i5.NgIf, i6.DynamicFormComponent], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}