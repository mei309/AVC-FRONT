{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../genral.service\";\nimport * as i2 from \"./countiners.service\";\nimport * as i3 from \"../components/dynamic-form/dynamic-form.component\";\nexport class CountinersBookingComponent {\n  constructor(genral, localService) {\n    this.genral = genral;\n    this.localService = localService;\n    this.putData = null;\n  }\n\n  ngOnInit() {\n    this.regConfig = [{\n      type: 'date',\n      label: \"Contract date\",\n      value: 'timeNow',\n      name: 'recordedTime',\n      options: 'withTime',\n      disable: true\n    }, {\n      type: 'input',\n      label: \"Person in charge\",\n      name: 'personInCharge',\n      inputType: 'text'\n    }, {\n      type: 'select',\n      label: \"Logistics company\",\n      name: 'logisticsCompany',\n      options: this.genral.getAllItemsCashew()\n    }, {\n      type: 'bigexpand',\n      label: \"Booked containers\",\n      name: 'bookedContainers',\n      value: 'required',\n      collections: [{\n        type: 'input',\n        label: \"Bill number\",\n        name: 'billNumber'\n      }, {\n        type: 'input',\n        label: \"Vessel\",\n        name: 'vessel'\n      }, {\n        type: 'input',\n        label: \"Shipping company\",\n        name: 'shippingCompany'\n      }, {\n        type: 'select',\n        label: \"Destination port\",\n        name: 'destinationPort',\n        options: this.localService.getShippingPorts() // disable: true,\n\n      }, {\n        type: 'date',\n        label: \"Etd\",\n        name: 'etd' // value: new Date()\n\n      }, {\n        type: 'selectNormal',\n        label: \"Container type\",\n        name: 'containerType',\n        value: '_20FEET',\n        options: this.genral.getShippingContainerType() // disable: true,\n\n      }, {\n        type: 'divider',\n        inputType: 'divide'\n      }] // validations: [\n      // {\n      //     name: 'numberUnits',\n      //     message: 'a orderd item must have weight and price and delivery date',\n      //     validator: [\n      //         {\n      //             name: 'amount',\n      //         },\n      //         {\n      //             name: 'measureUnit',\n      //         },\n      //     ],\n      // },\n      // {\n      //     name: 'deliveryDate',\n      // }, \n      // ]\n\n    }, {\n      type: 'button',\n      label: \"Submit\",\n      name: 'submit'\n    }];\n  }\n\n  submit(value) {\n    value['orderItems'].forEach(element => {\n      if (!element['unitPrice']['amount']) {\n        delete element['unitPrice'];\n      }\n    });\n    const fromNew = this.putData === null || this.putData === undefined; // this.localService.addEditCashewOrder(value, fromNew).pipe(take(1)).subscribe( val => {\n    //     const dialogRef = this.dialog.open(OrderDetailsDialogComponent, {\n    //         width: '80%',\n    //         data: {order: val, fromNew: true, type: 'Cashew order'}\n    //     });\n    //     dialogRef.afterClosed().subscribe(data => {\n    //         if (data === 'Edit order') {\n    //             this.putData = val;\n    //             this.isDataAvailable = false;\n    //             this.setRegEdit();\n    //             this.addRestReg();\n    //             this.cdRef.detectChanges();\n    //             this.isDataAvailable = true;\n    //         } else if(data === 'Receive') {\n    //             this.router.navigate(['../CashewReceived',{poCode: val['poCode']['id']}], { relativeTo: this._Activatedroute });\n    //         } \n    //         // else if(data === 'Sample weights') {\n    //         //     this.router.navigate(['../SampleWeights',{poCode: JSON.stringify(event['poCode'])}], { relativeTo: this._Activatedroute });\n    //         //   }\n    //           else {\n    //             this.router.navigate(['../CashewOrders'], { relativeTo: this._Activatedroute });\n    //         }\n    //     });\n    // });\n  }\n\n}\n\nCountinersBookingComponent.ɵfac = function CountinersBookingComponent_Factory(t) {\n  return new (t || CountinersBookingComponent)(i0.ɵɵdirectiveInject(i1.Genral), i0.ɵɵdirectiveInject(i2.CountinersService));\n};\n\nCountinersBookingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CountinersBookingComponent,\n  selectors: [[\"countiners-booking-component\"]],\n  decls: 1,\n  vars: 2,\n  consts: function () {\n    let i18n_0;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_7275156275338496850$$SRC_APP_COUNTINERS_COUNTINERS_BOOKING_COMPONENT_TS_1 = goog.getMsg(\"Cashew order\");\n      i18n_0 = MSG_EXTERNAL_7275156275338496850$$SRC_APP_COUNTINERS_COUNTINERS_BOOKING_COMPONENT_TS_1;\n    } else {\n      i18n_0 = \"Cashew order\";\n    }\n\n    return [[\"mainLabel\", i18n_0, 3, \"putData\", \"fields\", \"submitForm\"]];\n  },\n  template: function CountinersBookingComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"dynamic-form\", 0);\n      i0.ɵɵlistener(\"submitForm\", function CountinersBookingComponent_Template_dynamic_form_submitForm_0_listener($event) {\n        return ctx.submit($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"putData\", ctx.putData)(\"fields\", ctx.regConfig);\n    }\n  },\n  directives: [i3.DynamicFormComponent],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/isral/OneDrive/Documents/AVC-FRONT/src/app/countiners/countiners-booking.component.ts"],"names":["i0","i1","i2","i3","CountinersBookingComponent","constructor","genral","localService","putData","ngOnInit","regConfig","type","label","value","name","options","disable","inputType","getAllItemsCashew","collections","getShippingPorts","getShippingContainerType","submit","forEach","element","fromNew","undefined","ɵfac","CountinersBookingComponent_Factory","t","ɵɵdirectiveInject","Genral","CountinersService","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","i18n_0","ngI18nClosureMode","MSG_EXTERNAL_7275156275338496850$$SRC_APP_COUNTINERS_COUNTINERS_BOOKING_COMPONENT_TS_1","goog","getMsg","template","CountinersBookingComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","CountinersBookingComponent_Template_dynamic_form_submitForm_0_listener","$event","ɵɵelementEnd","ɵɵproperty","directives","DynamicFormComponent","encapsulation"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../genral.service\";\r\nimport * as i2 from \"./countiners.service\";\r\nimport * as i3 from \"../components/dynamic-form/dynamic-form.component\";\r\nexport class CountinersBookingComponent {\r\n    constructor(genral, localService) {\r\n        this.genral = genral;\r\n        this.localService = localService;\r\n        this.putData = null;\r\n    }\r\n    ngOnInit() {\r\n        this.regConfig = [\r\n            {\r\n                type: 'date',\r\n                label: $localize `Contract date`,\r\n                value: 'timeNow',\r\n                name: 'recordedTime',\r\n                options: 'withTime',\r\n                disable: true,\r\n            },\r\n            {\r\n                type: 'input',\r\n                label: $localize `Person in charge`,\r\n                name: 'personInCharge',\r\n                inputType: 'text',\r\n            },\r\n            {\r\n                type: 'select',\r\n                label: $localize `Logistics company`,\r\n                name: 'logisticsCompany',\r\n                options: this.genral.getAllItemsCashew(),\r\n            },\r\n            {\r\n                type: 'bigexpand',\r\n                label: $localize `Booked containers`,\r\n                name: 'bookedContainers',\r\n                value: 'required',\r\n                collections: [\r\n                    {\r\n                        type: 'input',\r\n                        label: $localize `Bill number`,\r\n                        name: 'billNumber',\r\n                    },\r\n                    {\r\n                        type: 'input',\r\n                        label: $localize `Vessel`,\r\n                        name: 'vessel',\r\n                    },\r\n                    {\r\n                        type: 'input',\r\n                        label: $localize `Shipping company`,\r\n                        name: 'shippingCompany',\r\n                    },\r\n                    {\r\n                        type: 'select',\r\n                        label: $localize `Destination port`,\r\n                        name: 'destinationPort',\r\n                        options: this.localService.getShippingPorts(),\r\n                        // disable: true,\r\n                    },\r\n                    {\r\n                        type: 'date',\r\n                        label: $localize `Etd`,\r\n                        name: 'etd',\r\n                        // value: new Date()\r\n                    },\r\n                    {\r\n                        type: 'selectNormal',\r\n                        label: $localize `Container type`,\r\n                        name: 'containerType',\r\n                        value: '_20FEET',\r\n                        options: this.genral.getShippingContainerType(),\r\n                        // disable: true,\r\n                    },\r\n                    {\r\n                        type: 'divider',\r\n                        inputType: 'divide'\r\n                    },\r\n                ],\r\n                // validations: [\r\n                // {\r\n                //     name: 'numberUnits',\r\n                //     message: 'a orderd item must have weight and price and delivery date',\r\n                //     validator: [\r\n                //         {\r\n                //             name: 'amount',\r\n                //         },\r\n                //         {\r\n                //             name: 'measureUnit',\r\n                //         },\r\n                //     ],\r\n                // },\r\n                // {\r\n                //     name: 'deliveryDate',\r\n                // }, \r\n                // ]\r\n            },\r\n            {\r\n                type: 'button',\r\n                label: $localize `Submit`,\r\n                name: 'submit',\r\n            }\r\n        ];\r\n    }\r\n    submit(value) {\r\n        value['orderItems'].forEach(element => {\r\n            if (!element['unitPrice']['amount']) {\r\n                delete element['unitPrice'];\r\n            }\r\n        });\r\n        const fromNew = this.putData === null || this.putData === undefined;\r\n        // this.localService.addEditCashewOrder(value, fromNew).pipe(take(1)).subscribe( val => {\r\n        //     const dialogRef = this.dialog.open(OrderDetailsDialogComponent, {\r\n        //         width: '80%',\r\n        //         data: {order: val, fromNew: true, type: 'Cashew order'}\r\n        //     });\r\n        //     dialogRef.afterClosed().subscribe(data => {\r\n        //         if (data === 'Edit order') {\r\n        //             this.putData = val;\r\n        //             this.isDataAvailable = false;\r\n        //             this.setRegEdit();\r\n        //             this.addRestReg();\r\n        //             this.cdRef.detectChanges();\r\n        //             this.isDataAvailable = true;\r\n        //         } else if(data === 'Receive') {\r\n        //             this.router.navigate(['../CashewReceived',{poCode: val['poCode']['id']}], { relativeTo: this._Activatedroute });\r\n        //         } \r\n        //         // else if(data === 'Sample weights') {\r\n        //         //     this.router.navigate(['../SampleWeights',{poCode: JSON.stringify(event['poCode'])}], { relativeTo: this._Activatedroute });\r\n        //         //   }\r\n        //           else {\r\n        //             this.router.navigate(['../CashewOrders'], { relativeTo: this._Activatedroute });\r\n        //         }\r\n        //     });\r\n        // });\r\n    }\r\n}\r\nCountinersBookingComponent.ɵfac = function CountinersBookingComponent_Factory(t) { return new (t || CountinersBookingComponent)(i0.ɵɵdirectiveInject(i1.Genral), i0.ɵɵdirectiveInject(i2.CountinersService)); };\r\nCountinersBookingComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CountinersBookingComponent, selectors: [[\"countiners-booking-component\"]], decls: 1, vars: 2, consts: function () { let i18n_0; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_7275156275338496850$$SRC_APP_COUNTINERS_COUNTINERS_BOOKING_COMPONENT_TS_1 = goog.getMsg(\"Cashew order\");\r\n        i18n_0 = MSG_EXTERNAL_7275156275338496850$$SRC_APP_COUNTINERS_COUNTINERS_BOOKING_COMPONENT_TS_1;\r\n    }\r\n    else {\r\n        i18n_0 = $localize `:␟f89663ca7ed16e769ab07933dac76aa26f2363b4␟7275156275338496850:Cashew order`;\r\n    } return [[\"mainLabel\", i18n_0, 3, \"putData\", \"fields\", \"submitForm\"]]; }, template: function CountinersBookingComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"dynamic-form\", 0);\r\n        i0.ɵɵlistener(\"submitForm\", function CountinersBookingComponent_Template_dynamic_form_submitForm_0_listener($event) { return ctx.submit($event); });\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"putData\", ctx.putData)(\"fields\", ctx.regConfig);\r\n    } }, directives: [i3.DynamicFormComponent], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}