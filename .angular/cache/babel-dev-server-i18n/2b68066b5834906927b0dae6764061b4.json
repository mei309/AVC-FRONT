{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { NavigationEnd } from '@angular/router';\nimport { ReplaySubject } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../genral.service\";\nimport * as i3 from \"./orders.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/tabs\";\nimport * as i7 from \"../tables/search-details.component\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"../components/dynamic-form/dynamic-form.component\";\n\nfunction AddEditPoDialog_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"dynamic-form\", 1);\n    i0.ɵɵlistener(\"submitForm\", function AddEditPoDialog_div_0_Template_dynamic_form_submitForm_1_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.submit($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"putData\", ctx_r0.putData)(\"fields\", ctx_r0.poConfig)(\"mainLabel\", ctx_r0.poCode ? \"Edit PO#\" : \"Add PO#\");\n  }\n}\n\nexport class PoCodesComponent {\n  constructor(router, _Activatedroute, cdRef, genral, localService, dialog) {\n    this.router = router;\n    this._Activatedroute = _Activatedroute;\n    this.cdRef = cdRef;\n    this.genral = genral;\n    this.localService = localService;\n    this.dialog = dialog;\n    this.tabIndex = 0;\n    this.suppliersChangable = new ReplaySubject();\n    this.contractTypesChangable = new ReplaySubject();\n  }\n\n  ngOnInit() {\n    this.columnsPos = [{\n      type: 'normal',\n      name: 'code',\n      label: \"Code\"\n    }, {\n      type: 'normal',\n      name: 'supplierName',\n      label: \"Supplier\",\n      search: 'selectObj',\n      options: this.suppliersChangable\n    }, // {\n    //     type: 'normal',\n    //     name: 'contractTypeCode',\n    //     label: $localize`Contract type code`,\n    //     search: 'selectObj',\n    //     options: this.contractTypesChangable,\n    // },\n    // {\n    //     type: 'normal',\n    //     name: 'contractTypeSuffix',\n    //     label: $localize`Suffix`,\n    // },\n    {\n      type: 'normal',\n      name: 'value',\n      label: \"Display\"\n    }];\n\n    this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n      if (params.get('number')) {\n        this.tabIndex = +params.get('number');\n        this.changed(+params.get('number'));\n      } else {\n        this.changed(0);\n      }\n    });\n\n    this.navigationSubscription = this.router.events.subscribe(e => {\n      // If it is a NavigationEnd event re-initalise the component\n      if (e instanceof NavigationEnd) {\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n          if (params.get('number')) {\n            this.tabIndex = +params.get('number');\n            this.changed(+params.get('number'));\n          } else {\n            this.changed(0);\n          }\n        });\n      }\n    });\n  }\n\n  newDialog(value) {\n    const dialogRef = this.dialog.open(AddEditPoDialog, {\n      width: '80%',\n      height: '80%',\n      data: {\n        poCode: value ? value['id'] : null,\n        tab: this.tabIndex\n      }\n    });\n    dialogRef.afterClosed().subscribe(data => {\n      if (data === 'success') {\n        this.changed(this.tabIndex, true);\n      }\n    });\n  }\n\n  changed(event, isSame) {\n    switch (+event) {\n      case 0:\n        this.posSource = null;\n\n        if (!isSame) {\n          this.genral.getSuppliersCashew().pipe(take(1)).subscribe(val => {\n            this.suppliersChangable.next(val);\n          });\n          this.localService.getCashewContractTypes().pipe(take(1)).subscribe(val => {\n            this.contractTypesChangable.next(val);\n          });\n        }\n\n        var ind = this.columnsPos.findIndex(em => em['name'] === 'productCompanyName');\n\n        if (ind === -1) {\n          this.columnsPos.push({\n            type: 'select',\n            label: \"Product company\",\n            name: 'productCompanyName',\n            search: 'selectObj',\n            options: this.localService.getSuppliersGroups()\n          });\n          this.columnsPos = this.columnsPos.slice();\n        }\n\n        this.localService.findAllProductPoCodes().pipe(take(1)).subscribe(value => {\n          this.posSource = value;\n        });\n        this.cdRef.detectChanges();\n        break;\n\n      case 1:\n        this.posSource = null;\n\n        if (!isSame) {\n          this.genral.getSuppliersGeneral().pipe(take(1)).subscribe(val => {\n            this.suppliersChangable.next(val);\n          });\n          this.localService.getGeneralContractTypes().pipe(take(1)).subscribe(val => {\n            this.contractTypesChangable.next(val);\n          });\n          var ind = this.columnsPos.findIndex(em => em['name'] === 'productCompanyName');\n\n          if (ind !== -1) {\n            this.columnsPos.splice(ind, 1);\n            this.columnsPos = this.columnsPos.slice();\n          }\n        }\n\n        this.localService.findAllGeneralPoCodes().pipe(take(1)).subscribe(value => {\n          this.posSource = value;\n        });\n        this.cdRef.detectChanges();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.navigationSubscription) {\n      this.navigationSubscription.unsubscribe();\n    }\n\n    this.suppliersChangable.unsubscribe();\n    this.contractTypesChangable.unsubscribe();\n  }\n\n}\n\nPoCodesComponent.ɵfac = function PoCodesComponent_Factory(t) {\n  return new (t || PoCodesComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.Genral), i0.ɵɵdirectiveInject(i3.OrdersService), i0.ɵɵdirectiveInject(i4.MatDialog));\n};\n\nPoCodesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PoCodesComponent,\n  selectors: [[\"po-codes\"]],\n  decls: 9,\n  vars: 3,\n  consts: function () {\n    let i18n_0;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_2871630387872199820$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_1 = goog.getMsg(\"#POS\");\n      i18n_0 = MSG_EXTERNAL_2871630387872199820$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_1;\n    } else {\n      i18n_0 = \"#POS\";\n    }\n\n    let i18n_2;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_4546580819913319412$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_3 = goog.getMsg(\"Add #PO\");\n      i18n_2 = MSG_EXTERNAL_4546580819913319412$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_3;\n    } else {\n      i18n_2 = \"Add #PO\";\n    }\n\n    let i18n_4;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_6512948890889947614$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_5 = goog.getMsg(\"Cashew\");\n      i18n_4 = MSG_EXTERNAL_6512948890889947614$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_5;\n    } else {\n      i18n_4 = \"Cashew\";\n    }\n\n    let i18n_6;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_6439365426343089851$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_7 = goog.getMsg(\"General\");\n      i18n_6 = MSG_EXTERNAL_6439365426343089851$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_7;\n    } else {\n      i18n_6 = \"General\";\n    }\n\n    return [[2, \"text-align\", \"center\"], i18n_0, [1, \"centerButtons\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], i18n_2, [\"mat-stretch-tabs\", \"\", 1, \"spac-print\", 3, \"selectedIndex\", \"selectedIndexChange\"], [\"label\", i18n_4], [\"label\", i18n_6], [3, \"dataSource\", \"oneColumns\", \"details\"]];\n  },\n  template: function PoCodesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵi18n(1, 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"button\", 3);\n      i0.ɵɵlistener(\"click\", function PoCodesComponent_Template_button_click_3_listener() {\n        return ctx.newDialog();\n      });\n      i0.ɵɵi18n(4, 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"mat-tab-group\", 5);\n      i0.ɵɵlistener(\"selectedIndexChange\", function PoCodesComponent_Template_mat_tab_group_selectedIndexChange_5_listener($event) {\n        return ctx.tabIndex = $event;\n      })(\"selectedIndexChange\", function PoCodesComponent_Template_mat_tab_group_selectedIndexChange_5_listener($event) {\n        return ctx.changed($event);\n      });\n      i0.ɵɵelement(6, \"mat-tab\", 6);\n      i0.ɵɵelement(7, \"mat-tab\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"search-details\", 8);\n      i0.ɵɵlistener(\"details\", function PoCodesComponent_Template_search_details_details_8_listener($event) {\n        return ctx.newDialog($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"selectedIndex\", ctx.tabIndex);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"dataSource\", ctx.posSource)(\"oneColumns\", ctx.columnsPos);\n    }\n  },\n  directives: [i5.MatButton, i6.MatTabGroup, i6.MatTab, i7.SearchDetailsComponent],\n  encapsulation: 2\n});\nexport class AddEditPoDialog {\n  constructor(localService, dialogRef, data) {\n    this.localService = localService;\n    this.dialogRef = dialogRef;\n    this.data = data;\n    this.isDataAvailable = false;\n    this.poCode = data.poCode;\n    this.tab = data.tab;\n  }\n\n  ngOnInit() {\n    // if(!this.mainLabel.startsWith('Add mix')) {\n    if (this.poCode) {\n      this.localService.getPoCode(+this.poCode).pipe(take(1)).subscribe(val => {\n        this.putData = val;\n        this.isDataAvailable = true;\n      });\n    } else {\n      this.isDataAvailable = true;\n    }\n\n    this.poConfig = [{\n      type: 'select',\n      label: \"Supplier\",\n      name: 'supplier',\n      options: this.getSuppliers(this.tab),\n      validations: [{\n        name: 'required',\n        validator: Validators.required,\n        message: \"Supplier Required\"\n      }]\n    }, {\n      type: 'select',\n      label: \"PO initial\",\n      name: 'contractType',\n      options: this.getContractTypes(this.tab),\n      validations: [{\n        name: 'required',\n        validator: Validators.required,\n        message: \"PO initial Required\"\n      }]\n    }, {\n      type: 'input',\n      label: \"#PO\",\n      inputType: 'text',\n      name: 'code',\n      disable: true\n    }, ...(this.tab ? [] : [{\n      type: 'select',\n      label: \"Product company\",\n      name: 'productCompany',\n      options: this.localService.getSuppliersGroups()\n    }]), {\n      type: 'button',\n      label: \"Submit\",\n      name: 'submit'\n    }];\n  }\n\n  submit(value) {\n    if (this.tab === 0) {\n      this.localService.addEditPoCode(value, this.poCode ? false : true).pipe(take(1)).subscribe(val => {\n        this.dialogRef.close('success');\n      });\n    } else {\n      this.localService.addEditGeneralPoCode(value, this.poCode ? false : true).pipe(take(1)).subscribe(val => {\n        this.dialogRef.close('success');\n      });\n    }\n  }\n\n  getSuppliers(tab) {\n    if (tab === 0) {\n      return this.localService.getCashewSuppliers();\n    } else {\n      return this.localService.getGeneralSuppliers();\n    }\n  }\n\n  getContractTypes(tab) {\n    if (tab === 0) {\n      return this.localService.getCashewContractTypes();\n    } else {\n      return this.localService.getGeneralContractTypes();\n    }\n  }\n\n  onNoClick() {\n    this.dialogRef.close('closed');\n  }\n\n}\n\nAddEditPoDialog.ɵfac = function AddEditPoDialog_Factory(t) {\n  return new (t || AddEditPoDialog)(i0.ɵɵdirectiveInject(i3.OrdersService), i0.ɵɵdirectiveInject(i4.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n};\n\nAddEditPoDialog.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AddEditPoDialog,\n  selectors: [[\"add-edit-po\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [\"popup\", \"true\", 3, \"putData\", \"fields\", \"mainLabel\", \"submitForm\"]],\n  template: function AddEditPoDialog_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AddEditPoDialog_div_0_Template, 2, 3, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.isDataAvailable);\n    }\n  },\n  directives: [i8.NgIf, i9.DynamicFormComponent],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/isral/OneDrive/Documents/AVC-FRONT/src/app/orders/po-codes.component.ts"],"names":["Validators","MAT_DIALOG_DATA","NavigationEnd","ReplaySubject","take","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","AddEditPoDialog_div_0_Template","rf","ctx","_r2","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","AddEditPoDialog_div_0_Template_dynamic_form_submitForm_1_listener","$event","ɵɵrestoreView","ctx_r1","ɵɵnextContext","submit","ɵɵelementEnd","ctx_r0","ɵɵadvance","ɵɵproperty","putData","poConfig","poCode","PoCodesComponent","constructor","router","_Activatedroute","cdRef","genral","localService","dialog","tabIndex","suppliersChangable","contractTypesChangable","ngOnInit","columnsPos","type","name","label","search","options","paramMap","pipe","subscribe","params","get","changed","navigationSubscription","events","e","newDialog","value","dialogRef","open","AddEditPoDialog","width","height","data","tab","afterClosed","event","isSame","posSource","getSuppliersCashew","val","next","getCashewContractTypes","ind","findIndex","em","push","getSuppliersGroups","slice","findAllProductPoCodes","detectChanges","getSuppliersGeneral","getGeneralContractTypes","splice","findAllGeneralPoCodes","ngOnDestroy","unsubscribe","ɵfac","PoCodesComponent_Factory","t","ɵɵdirectiveInject","Router","ActivatedRoute","ChangeDetectorRef","Genral","OrdersService","MatDialog","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","i18n_0","ngI18nClosureMode","MSG_EXTERNAL_2871630387872199820$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_1","goog","getMsg","i18n_2","MSG_EXTERNAL_4546580819913319412$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_3","i18n_4","MSG_EXTERNAL_6512948890889947614$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_5","i18n_6","MSG_EXTERNAL_6439365426343089851$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_7","template","PoCodesComponent_Template","ɵɵi18n","PoCodesComponent_Template_button_click_3_listener","PoCodesComponent_Template_mat_tab_group_selectedIndexChange_5_listener","ɵɵelement","PoCodesComponent_Template_search_details_details_8_listener","directives","MatButton","MatTabGroup","MatTab","SearchDetailsComponent","encapsulation","isDataAvailable","getPoCode","getSuppliers","validations","validator","required","message","getContractTypes","inputType","disable","addEditPoCode","close","addEditGeneralPoCode","getCashewSuppliers","getGeneralSuppliers","onNoClick","AddEditPoDialog_Factory","MatDialogRef","AddEditPoDialog_Template","ɵɵtemplate","NgIf","DynamicFormComponent"],"mappings":"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","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { NavigationEnd } from '@angular/router';\r\nimport { ReplaySubject } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"../genral.service\";\r\nimport * as i3 from \"./orders.service\";\r\nimport * as i4 from \"@angular/material/dialog\";\r\nimport * as i5 from \"@angular/material/button\";\r\nimport * as i6 from \"@angular/material/tabs\";\r\nimport * as i7 from \"../tables/search-details.component\";\r\nimport * as i8 from \"@angular/common\";\r\nimport * as i9 from \"../components/dynamic-form/dynamic-form.component\";\r\nfunction AddEditPoDialog_div_0_Template(rf, ctx) { if (rf & 1) {\r\n    const _r2 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵelementStart(1, \"dynamic-form\", 1);\r\n    i0.ɵɵlistener(\"submitForm\", function AddEditPoDialog_div_0_Template_dynamic_form_submitForm_1_listener($event) { i0.ɵɵrestoreView(_r2); const ctx_r1 = i0.ɵɵnextContext(); return ctx_r1.submit($event); });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"putData\", ctx_r0.putData)(\"fields\", ctx_r0.poConfig)(\"mainLabel\", ctx_r0.poCode ? \"Edit PO#\" : \"Add PO#\");\r\n} }\r\nexport class PoCodesComponent {\r\n    constructor(router, _Activatedroute, cdRef, genral, localService, dialog) {\r\n        this.router = router;\r\n        this._Activatedroute = _Activatedroute;\r\n        this.cdRef = cdRef;\r\n        this.genral = genral;\r\n        this.localService = localService;\r\n        this.dialog = dialog;\r\n        this.tabIndex = 0;\r\n        this.suppliersChangable = new ReplaySubject();\r\n        this.contractTypesChangable = new ReplaySubject();\r\n    }\r\n    ngOnInit() {\r\n        this.columnsPos = [\r\n            {\r\n                type: 'normal',\r\n                name: 'code',\r\n                label: $localize `Code`,\r\n            },\r\n            {\r\n                type: 'normal',\r\n                name: 'supplierName',\r\n                label: $localize `Supplier`,\r\n                search: 'selectObj',\r\n                options: this.suppliersChangable,\r\n            },\r\n            // {\r\n            //     type: 'normal',\r\n            //     name: 'contractTypeCode',\r\n            //     label: $localize`Contract type code`,\r\n            //     search: 'selectObj',\r\n            //     options: this.contractTypesChangable,\r\n            // },\r\n            // {\r\n            //     type: 'normal',\r\n            //     name: 'contractTypeSuffix',\r\n            //     label: $localize`Suffix`,\r\n            // },\r\n            {\r\n                type: 'normal',\r\n                name: 'value',\r\n                label: $localize `Display`,\r\n            },\r\n        ];\r\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n            if (params.get('number')) {\r\n                this.tabIndex = +params.get('number');\r\n                this.changed(+params.get('number'));\r\n            }\r\n            else {\r\n                this.changed(0);\r\n            }\r\n        });\r\n        this.navigationSubscription = this.router.events.subscribe((e) => {\r\n            // If it is a NavigationEnd event re-initalise the component\r\n            if (e instanceof NavigationEnd) {\r\n                this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n                    if (params.get('number')) {\r\n                        this.tabIndex = +params.get('number');\r\n                        this.changed(+params.get('number'));\r\n                    }\r\n                    else {\r\n                        this.changed(0);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    newDialog(value) {\r\n        const dialogRef = this.dialog.open(AddEditPoDialog, {\r\n            width: '80%',\r\n            height: '80%',\r\n            data: { poCode: value ? value['id'] : null, tab: this.tabIndex }\r\n        });\r\n        dialogRef.afterClosed().subscribe(data => {\r\n            if (data === 'success') {\r\n                this.changed(this.tabIndex, true);\r\n            }\r\n        });\r\n    }\r\n    changed(event, isSame) {\r\n        switch (+event) {\r\n            case 0:\r\n                this.posSource = null;\r\n                if (!isSame) {\r\n                    this.genral.getSuppliersCashew().pipe(take(1)).subscribe(val => {\r\n                        this.suppliersChangable.next(val);\r\n                    });\r\n                    this.localService.getCashewContractTypes().pipe(take(1)).subscribe(val => {\r\n                        this.contractTypesChangable.next(val);\r\n                    });\r\n                }\r\n                var ind = this.columnsPos.findIndex((em) => em['name'] === 'productCompanyName');\r\n                if (ind === -1) {\r\n                    this.columnsPos.push({\r\n                        type: 'select',\r\n                        label: $localize `Product company`,\r\n                        name: 'productCompanyName',\r\n                        search: 'selectObj',\r\n                        options: this.localService.getSuppliersGroups(),\r\n                    });\r\n                    this.columnsPos = this.columnsPos.slice();\r\n                }\r\n                this.localService.findAllProductPoCodes().pipe(take(1)).subscribe(value => {\r\n                    this.posSource = value;\r\n                });\r\n                this.cdRef.detectChanges();\r\n                break;\r\n            case 1:\r\n                this.posSource = null;\r\n                if (!isSame) {\r\n                    this.genral.getSuppliersGeneral().pipe(take(1)).subscribe(val => {\r\n                        this.suppliersChangable.next(val);\r\n                    });\r\n                    this.localService.getGeneralContractTypes().pipe(take(1)).subscribe(val => {\r\n                        this.contractTypesChangable.next(val);\r\n                    });\r\n                    var ind = this.columnsPos.findIndex((em) => em['name'] === 'productCompanyName');\r\n                    if (ind !== -1) {\r\n                        this.columnsPos.splice(ind, 1);\r\n                        this.columnsPos = this.columnsPos.slice();\r\n                    }\r\n                }\r\n                this.localService.findAllGeneralPoCodes().pipe(take(1)).subscribe(value => {\r\n                    this.posSource = value;\r\n                });\r\n                this.cdRef.detectChanges();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n        this.suppliersChangable.unsubscribe();\r\n        this.contractTypesChangable.unsubscribe();\r\n    }\r\n}\r\nPoCodesComponent.ɵfac = function PoCodesComponent_Factory(t) { return new (t || PoCodesComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i2.Genral), i0.ɵɵdirectiveInject(i3.OrdersService), i0.ɵɵdirectiveInject(i4.MatDialog)); };\r\nPoCodesComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PoCodesComponent, selectors: [[\"po-codes\"]], decls: 9, vars: 3, consts: function () { let i18n_0; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_2871630387872199820$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_1 = goog.getMsg(\"#POS\");\r\n        i18n_0 = MSG_EXTERNAL_2871630387872199820$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_1;\r\n    }\r\n    else {\r\n        i18n_0 = $localize `:␟933d2016473d3d98d4783458ed72a0420e173d16␟2871630387872199820:#POS`;\r\n    } let i18n_2; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_4546580819913319412$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_3 = goog.getMsg(\"Add #PO\");\r\n        i18n_2 = MSG_EXTERNAL_4546580819913319412$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_3;\r\n    }\r\n    else {\r\n        i18n_2 = $localize `:␟ec7fa0b885b81c9babd7fd27506fd7e163e13a38␟4546580819913319412:Add #PO`;\r\n    } let i18n_4; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_6512948890889947614$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_5 = goog.getMsg(\"Cashew\");\r\n        i18n_4 = MSG_EXTERNAL_6512948890889947614$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_5;\r\n    }\r\n    else {\r\n        i18n_4 = $localize `:␟254fec480fcac5e3ac9d48d5d02312080a8c91e3␟6512948890889947614:Cashew`;\r\n    } let i18n_6; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_6439365426343089851$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_7 = goog.getMsg(\"General\");\r\n        i18n_6 = MSG_EXTERNAL_6439365426343089851$$SRC_APP_ORDERS_PO_CODES_COMPONENT_TS_7;\r\n    }\r\n    else {\r\n        i18n_6 = $localize `:␟3d53f64033c4b76fdc1076ba15955d913209866c␟6439365426343089851:General`;\r\n    } return [[2, \"text-align\", \"center\"], i18n_0, [1, \"centerButtons\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], i18n_2, [\"mat-stretch-tabs\", \"\", 1, \"spac-print\", 3, \"selectedIndex\", \"selectedIndexChange\"], [\"label\", i18n_4], [\"label\", i18n_6], [3, \"dataSource\", \"oneColumns\", \"details\"]]; }, template: function PoCodesComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\", 0);\r\n        i0.ɵɵi18n(1, 1);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelementStart(3, \"button\", 3);\r\n        i0.ɵɵlistener(\"click\", function PoCodesComponent_Template_button_click_3_listener() { return ctx.newDialog(); });\r\n        i0.ɵɵi18n(4, 4);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"mat-tab-group\", 5);\r\n        i0.ɵɵlistener(\"selectedIndexChange\", function PoCodesComponent_Template_mat_tab_group_selectedIndexChange_5_listener($event) { return ctx.tabIndex = $event; })(\"selectedIndexChange\", function PoCodesComponent_Template_mat_tab_group_selectedIndexChange_5_listener($event) { return ctx.changed($event); });\r\n        i0.ɵɵelement(6, \"mat-tab\", 6);\r\n        i0.ɵɵelement(7, \"mat-tab\", 7);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(8, \"search-details\", 8);\r\n        i0.ɵɵlistener(\"details\", function PoCodesComponent_Template_search_details_details_8_listener($event) { return ctx.newDialog($event); });\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"selectedIndex\", ctx.tabIndex);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"dataSource\", ctx.posSource)(\"oneColumns\", ctx.columnsPos);\r\n    } }, directives: [i5.MatButton, i6.MatTabGroup, i6.MatTab, i7.SearchDetailsComponent], encapsulation: 2 });\r\nexport class AddEditPoDialog {\r\n    constructor(localService, dialogRef, data) {\r\n        this.localService = localService;\r\n        this.dialogRef = dialogRef;\r\n        this.data = data;\r\n        this.isDataAvailable = false;\r\n        this.poCode = data.poCode;\r\n        this.tab = data.tab;\r\n    }\r\n    ngOnInit() {\r\n        // if(!this.mainLabel.startsWith('Add mix')) {\r\n        if (this.poCode) {\r\n            this.localService.getPoCode(+this.poCode).pipe(take(1)).subscribe(val => {\r\n                this.putData = val;\r\n                this.isDataAvailable = true;\r\n            });\r\n        }\r\n        else {\r\n            this.isDataAvailable = true;\r\n        }\r\n        this.poConfig = [\r\n            {\r\n                type: 'select',\r\n                label: $localize `Supplier`,\r\n                name: 'supplier',\r\n                options: this.getSuppliers(this.tab),\r\n                validations: [\r\n                    {\r\n                        name: 'required',\r\n                        validator: Validators.required,\r\n                        message: $localize `Supplier Required`,\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                type: 'select',\r\n                label: $localize `PO initial`,\r\n                name: 'contractType',\r\n                options: this.getContractTypes(this.tab),\r\n                validations: [\r\n                    {\r\n                        name: 'required',\r\n                        validator: Validators.required,\r\n                        message: $localize `PO initial Required`,\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                type: 'input',\r\n                label: $localize `#PO`,\r\n                inputType: 'text',\r\n                name: 'code',\r\n                disable: true,\r\n            },\r\n            ...this.tab ? [] : [\r\n                {\r\n                    type: 'select',\r\n                    label: $localize `Product company`,\r\n                    name: 'productCompany',\r\n                    options: this.localService.getSuppliersGroups(),\r\n                }\r\n            ],\r\n            {\r\n                type: 'button',\r\n                label: $localize `Submit`,\r\n                name: 'submit',\r\n            }\r\n        ];\r\n    }\r\n    submit(value) {\r\n        if (this.tab === 0) {\r\n            this.localService.addEditPoCode(value, this.poCode ? false : true).pipe(take(1)).subscribe(val => {\r\n                this.dialogRef.close('success');\r\n            });\r\n        }\r\n        else {\r\n            this.localService.addEditGeneralPoCode(value, this.poCode ? false : true).pipe(take(1)).subscribe(val => {\r\n                this.dialogRef.close('success');\r\n            });\r\n        }\r\n    }\r\n    getSuppliers(tab) {\r\n        if (tab === 0) {\r\n            return this.localService.getCashewSuppliers();\r\n        }\r\n        else {\r\n            return this.localService.getGeneralSuppliers();\r\n        }\r\n    }\r\n    getContractTypes(tab) {\r\n        if (tab === 0) {\r\n            return this.localService.getCashewContractTypes();\r\n        }\r\n        else {\r\n            return this.localService.getGeneralContractTypes();\r\n        }\r\n    }\r\n    onNoClick() {\r\n        this.dialogRef.close('closed');\r\n    }\r\n}\r\nAddEditPoDialog.ɵfac = function AddEditPoDialog_Factory(t) { return new (t || AddEditPoDialog)(i0.ɵɵdirectiveInject(i3.OrdersService), i0.ɵɵdirectiveInject(i4.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA)); };\r\nAddEditPoDialog.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AddEditPoDialog, selectors: [[\"add-edit-po\"]], decls: 1, vars: 1, consts: [[4, \"ngIf\"], [\"popup\", \"true\", 3, \"putData\", \"fields\", \"mainLabel\", \"submitForm\"]], template: function AddEditPoDialog_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, AddEditPoDialog_div_0_Template, 2, 3, \"div\", 0);\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isDataAvailable);\r\n    } }, directives: [i8.NgIf, i9.DynamicFormComponent], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}