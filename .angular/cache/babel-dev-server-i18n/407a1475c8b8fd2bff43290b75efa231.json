{"ast":null,"code":"import { take } from 'rxjs/operators';\nimport { ProductionDetailsDialogComponent } from '../production/production-detailes-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"./reports.service\";\nimport * as i4 from \"./../genral.service\";\nimport * as i5 from \"../tables/date-range-select.component\";\nimport * as i6 from \"../tables/search-group-details.component\";\nexport class ProductionsByTimeComponent {\n  constructor(router, dialog, localService, _Activatedroute, genral, cdRef) {\n    this.router = router;\n    this.dialog = dialog;\n    this.localService = localService;\n    this._Activatedroute = _Activatedroute;\n    this.genral = genral;\n    this.cdRef = cdRef;\n    this.totelColumn = {\n      type: 'weight2',\n      name: 'processGain',\n      label: \"Total difference\",\n      group: 'poCodes',\n      options: ['%', 'LBS']\n    };\n    this.totelAll = {\n      type: 'listAmountWithUnit',\n      name: 'producedItems',\n      label: \"Total all produced\",\n      options: ['LBS']\n    };\n  }\n\n  ngOnInit() {\n    this.columnsShow = [{\n      type: 'arrayVal',\n      name: 'poCodes',\n      label: \"PO#\",\n      search: 'normal',\n      group: 'poCodes'\n    }, {\n      type: 'arrayVal',\n      name: 'suppliers',\n      label: \"Supplier\",\n      search: 'selectObjArr',\n      options: this.genral.getSuppliersCashew(),\n      group: 'poCodes'\n    }, {\n      name: 'processName',\n      label: \"Process name\",\n      search: 'select',\n      options: this.genral.getProcess()\n    }, {\n      name: 'productionLine',\n      label: \"Production line\",\n      search: 'selectObj',\n      options: this.genral.getProductionLine('')\n    }, {\n      type: 'itemWeight',\n      name: 'usedItems',\n      label: \"Used items\",\n      search: 'listAmountWithUnit',\n      options: this.genral.getItemsCashew('All')\n    }, {\n      type: 'itemWeight',\n      name: 'producedItems',\n      label: \"Produced items\",\n      search: 'listAmountWithUnit',\n      options: this.genral.getItemsCashew('All')\n    }, {\n      type: 'weight2',\n      name: 'processGain',\n      label: \"Difference\",\n      search: 'objArray'\n    }, {\n      type: 'dateTime',\n      name: 'recordedTime',\n      label: \"Recorded time\",\n      search: 'dates'\n    }, {\n      type: 'normal',\n      name: 'startTime',\n      label: \"Start time\",\n      search: 'normal'\n    }, {\n      type: 'normal',\n      name: 'endTime',\n      label: \"End time\",\n      search: 'normal'\n    }, {\n      type: 'normal',\n      name: 'downtime',\n      label: \"Down time\",\n      search: 'normal'\n    }, {\n      type: 'normal',\n      name: 'numOfWorkers',\n      label: \"Labor\",\n      search: 'normal'\n    }, {\n      type: 'normal',\n      name: 'status',\n      label: \"Status\",\n      search: 'select',\n      options: this.genral.getProcessStatus()\n    }];\n  }\n\n  openDialog(event) {\n    const dialogRef = this.dialog.open(ProductionDetailsDialogComponent, {\n      width: '80%',\n      data: {\n        id: event['id'],\n        fromNew: false,\n        type: this.getType(event.processName)\n      }\n    });\n    dialogRef.afterClosed().subscribe(data => {\n      if (data === \"Edit\") {\n        switch (event.processName) {\n          case 'Cashew Cleaning':\n            this.router.navigate(['Main/production/Cleaning', {\n              id: event['id'],\n              poCode: event['poCodeIds'][0]\n            }]);\n            break;\n\n          case 'Cashew Roasting':\n            this.router.navigate(['Main/production/Roasting', {\n              id: event['id'],\n              poCode: event['poCodeIds'][0]\n            }]);\n            break;\n\n          case 'Cashew Toffee':\n            this.router.navigate(['Main/production/Toffee', {\n              id: event['id'],\n              poCodes: event['poCodeIds']\n            }]);\n            break;\n\n          case 'Packing':\n            this.router.navigate(['Main/production/Packing', {\n              id: event['id'],\n              poCodes: event['poCodeIds'],\n              withPacked: dialogRef.componentInstance.withPacked,\n              addPos: dialogRef.componentInstance.addPos\n            }]);\n            break;\n\n          case 'Bad Quality Packing':\n            this.router.navigate(['Main/production/QcPacking', {\n              id: event['id'],\n              poCodes: event['poCodeIds'],\n              withCleaned: dialogRef.componentInstance.withCleaned,\n              addPos: dialogRef.componentInstance.addPos\n            }]);\n            break;\n\n          default:\n            break;\n        }\n      } else if (dialogRef.componentInstance.approveChange) {\n        this.getAllByDate(this.dateRange);\n      }\n    });\n  }\n\n  getAllByDate($event) {\n    this.dateRange = $event;\n    this.cashewSourceColumns = null;\n    this.localService.allProductionByTime($event).pipe(take(1)).subscribe(value => {\n      this.cashewSourceColumns = value;\n    });\n    this.cdRef.detectChanges();\n  }\n\n  getType(eve) {\n    switch (eve) {\n      case 'Cashew Cleaning':\n        return 'Cleaning';\n\n      case 'Cashew Roasting':\n        return 'Roasting';\n\n      case 'Cashew Toffee':\n        return 'Toffee';\n\n      case 'Packing':\n        return 'Packing';\n\n      case 'Bad Quality Packing':\n        return 'QC Pack';\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.navigationSubscription) {\n      this.navigationSubscription.unsubscribe();\n    }\n  }\n\n}\n\nProductionsByTimeComponent.ɵfac = function ProductionsByTimeComponent_Factory(t) {\n  return new (t || ProductionsByTimeComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.ReportsService), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Genral), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n\nProductionsByTimeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductionsByTimeComponent,\n  selectors: [[\"productions-by-time\"]],\n  decls: 4,\n  vars: 5,\n  consts: function () {\n    let i18n_0;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_5475831939213401315$$SRC_APP_REPORTS_PRODUCTION_BY_TIME_COMPONENT_TS_1 = goog.getMsg(\"Productions Report\");\n      i18n_0 = MSG_EXTERNAL_5475831939213401315$$SRC_APP_REPORTS_PRODUCTION_BY_TIME_COMPONENT_TS_1;\n    } else {\n      i18n_0 = \"Productions Report\";\n    }\n\n    return [[2, \"text-align\", \"center\"], i18n_0, [3, \"submitRange\"], [3, \"mainColumns\", \"detailsSource\", \"totelColumn\", \"totelAll\", \"withPaginator\", \"details\"]];\n  },\n  template: function ProductionsByTimeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵi18n(1, 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"date-range-select\", 2);\n      i0.ɵɵlistener(\"submitRange\", function ProductionsByTimeComponent_Template_date_range_select_submitRange_2_listener($event) {\n        return ctx.getAllByDate($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"search-group-details\", 3);\n      i0.ɵɵlistener(\"details\", function ProductionsByTimeComponent_Template_search_group_details_details_3_listener($event) {\n        return ctx.openDialog($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"mainColumns\", ctx.columnsShow)(\"detailsSource\", ctx.cashewSourceColumns)(\"totelColumn\", ctx.totelColumn)(\"totelAll\", ctx.totelAll)(\"withPaginator\", false);\n    }\n  },\n  directives: [i5.DateRangeSelect, i6.SearchGroupDetailsComponent],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/isral/OneDrive/Documents/AVC-FRONT/src/app/reports/production-by-time.component.ts"],"names":["take","ProductionDetailsDialogComponent","i0","i1","i2","i3","i4","i5","i6","ProductionsByTimeComponent","constructor","router","dialog","localService","_Activatedroute","genral","cdRef","totelColumn","type","name","label","group","options","totelAll","ngOnInit","columnsShow","search","getSuppliersCashew","getProcess","getProductionLine","getItemsCashew","getProcessStatus","openDialog","event","dialogRef","open","width","data","id","fromNew","getType","processName","afterClosed","subscribe","navigate","poCode","poCodes","withPacked","componentInstance","addPos","withCleaned","approveChange","getAllByDate","dateRange","$event","cashewSourceColumns","allProductionByTime","pipe","value","detectChanges","eve","ngOnDestroy","navigationSubscription","unsubscribe","ɵfac","ProductionsByTimeComponent_Factory","t","ɵɵdirectiveInject","Router","MatDialog","ReportsService","ActivatedRoute","Genral","ChangeDetectorRef","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","i18n_0","ngI18nClosureMode","MSG_EXTERNAL_5475831939213401315$$SRC_APP_REPORTS_PRODUCTION_BY_TIME_COMPONENT_TS_1","goog","getMsg","template","ProductionsByTimeComponent_Template","rf","ctx","ɵɵelementStart","ɵɵi18n","ɵɵelementEnd","ɵɵlistener","ProductionsByTimeComponent_Template_date_range_select_submitRange_2_listener","ProductionsByTimeComponent_Template_search_group_details_details_3_listener","ɵɵadvance","ɵɵproperty","directives","DateRangeSelect","SearchGroupDetailsComponent","encapsulation"],"mappings":"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","sourcesContent":["import { take } from 'rxjs/operators';\r\nimport { ProductionDetailsDialogComponent } from '../production/production-detailes-dialog.component';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"@angular/material/dialog\";\r\nimport * as i3 from \"./reports.service\";\r\nimport * as i4 from \"./../genral.service\";\r\nimport * as i5 from \"../tables/date-range-select.component\";\r\nimport * as i6 from \"../tables/search-group-details.component\";\r\nexport class ProductionsByTimeComponent {\r\n    constructor(router, dialog, localService, _Activatedroute, genral, cdRef) {\r\n        this.router = router;\r\n        this.dialog = dialog;\r\n        this.localService = localService;\r\n        this._Activatedroute = _Activatedroute;\r\n        this.genral = genral;\r\n        this.cdRef = cdRef;\r\n        this.totelColumn = {\r\n            type: 'weight2',\r\n            name: 'processGain',\r\n            label: $localize `Total difference`,\r\n            group: 'poCodes',\r\n            options: ['%', 'LBS']\r\n        };\r\n        this.totelAll = {\r\n            type: 'listAmountWithUnit',\r\n            name: 'producedItems',\r\n            label: $localize `Total all produced`,\r\n            options: ['LBS']\r\n        };\r\n    }\r\n    ngOnInit() {\r\n        this.columnsShow = [\r\n            {\r\n                type: 'arrayVal',\r\n                name: 'poCodes',\r\n                label: $localize `PO#`,\r\n                search: 'normal',\r\n                group: 'poCodes',\r\n            },\r\n            {\r\n                type: 'arrayVal',\r\n                name: 'suppliers',\r\n                label: $localize `Supplier`,\r\n                search: 'selectObjArr',\r\n                options: this.genral.getSuppliersCashew(),\r\n                group: 'poCodes',\r\n            },\r\n            {\r\n                name: 'processName',\r\n                label: $localize `Process name`,\r\n                search: 'select',\r\n                options: this.genral.getProcess(),\r\n            },\r\n            {\r\n                name: 'productionLine',\r\n                label: $localize `Production line`,\r\n                search: 'selectObj',\r\n                options: this.genral.getProductionLine(''),\r\n            },\r\n            {\r\n                type: 'itemWeight',\r\n                name: 'usedItems',\r\n                label: $localize `Used items`,\r\n                search: 'listAmountWithUnit',\r\n                options: this.genral.getItemsCashew('All'),\r\n            },\r\n            {\r\n                type: 'itemWeight',\r\n                name: 'producedItems',\r\n                label: $localize `Produced items`,\r\n                search: 'listAmountWithUnit',\r\n                options: this.genral.getItemsCashew('All'),\r\n            },\r\n            {\r\n                type: 'weight2',\r\n                name: 'processGain',\r\n                label: $localize `Difference`,\r\n                search: 'objArray',\r\n            },\r\n            {\r\n                type: 'dateTime',\r\n                name: 'recordedTime',\r\n                label: $localize `Recorded time`,\r\n                search: 'dates',\r\n            },\r\n            {\r\n                type: 'normal',\r\n                name: 'startTime',\r\n                label: $localize `Start time`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'normal',\r\n                name: 'endTime',\r\n                label: $localize `End time`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'normal',\r\n                name: 'downtime',\r\n                label: $localize `Down time`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'normal',\r\n                name: 'numOfWorkers',\r\n                label: $localize `Labor`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'normal',\r\n                name: 'status',\r\n                label: $localize `Status`,\r\n                search: 'select',\r\n                options: this.genral.getProcessStatus(),\r\n            },\r\n        ];\r\n    }\r\n    openDialog(event) {\r\n        const dialogRef = this.dialog.open(ProductionDetailsDialogComponent, {\r\n            width: '80%',\r\n            data: { id: event['id'], fromNew: false, type: this.getType(event.processName) },\r\n        });\r\n        dialogRef.afterClosed().subscribe(data => {\r\n            if (data === $localize `Edit`) {\r\n                switch (event.processName) {\r\n                    case 'Cashew Cleaning':\r\n                        this.router.navigate(['Main/production/Cleaning', { id: event['id'], poCode: event['poCodeIds'][0] }]);\r\n                        break;\r\n                    case 'Cashew Roasting':\r\n                        this.router.navigate(['Main/production/Roasting', { id: event['id'], poCode: event['poCodeIds'][0] }]);\r\n                        break;\r\n                    case 'Cashew Toffee':\r\n                        this.router.navigate(['Main/production/Toffee', { id: event['id'], poCodes: event['poCodeIds'] }]);\r\n                        break;\r\n                    case 'Packing':\r\n                        this.router.navigate(['Main/production/Packing', { id: event['id'], poCodes: event['poCodeIds'], withPacked: dialogRef.componentInstance.withPacked,\r\n                                addPos: dialogRef.componentInstance.addPos }]);\r\n                        break;\r\n                    case 'Bad Quality Packing':\r\n                        this.router.navigate(['Main/production/QcPacking', { id: event['id'], poCodes: event['poCodeIds'], withCleaned: dialogRef.componentInstance.withCleaned,\r\n                                addPos: dialogRef.componentInstance.addPos }]);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n            else if (dialogRef.componentInstance.approveChange) {\r\n                this.getAllByDate(this.dateRange);\r\n            }\r\n        });\r\n    }\r\n    getAllByDate($event) {\r\n        this.dateRange = $event;\r\n        this.cashewSourceColumns = null;\r\n        this.localService.allProductionByTime($event).pipe(take(1)).subscribe(value => {\r\n            this.cashewSourceColumns = value;\r\n        });\r\n        this.cdRef.detectChanges();\r\n    }\r\n    getType(eve) {\r\n        switch (eve) {\r\n            case 'Cashew Cleaning':\r\n                return 'Cleaning';\r\n            case 'Cashew Roasting':\r\n                return 'Roasting';\r\n            case 'Cashew Toffee':\r\n                return 'Toffee';\r\n            case 'Packing':\r\n                return 'Packing';\r\n            case 'Bad Quality Packing':\r\n                return 'QC Pack';\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n    }\r\n}\r\nProductionsByTimeComponent.ɵfac = function ProductionsByTimeComponent_Factory(t) { return new (t || ProductionsByTimeComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.ReportsService), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Genral), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };\r\nProductionsByTimeComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ProductionsByTimeComponent, selectors: [[\"productions-by-time\"]], decls: 4, vars: 5, consts: function () { let i18n_0; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_5475831939213401315$$SRC_APP_REPORTS_PRODUCTION_BY_TIME_COMPONENT_TS_1 = goog.getMsg(\"Productions Report\");\r\n        i18n_0 = MSG_EXTERNAL_5475831939213401315$$SRC_APP_REPORTS_PRODUCTION_BY_TIME_COMPONENT_TS_1;\r\n    }\r\n    else {\r\n        i18n_0 = $localize `:␟e72a4d14ae3973641188347acbbd119b64b137ba␟5475831939213401315:Productions Report`;\r\n    } return [[2, \"text-align\", \"center\"], i18n_0, [3, \"submitRange\"], [3, \"mainColumns\", \"detailsSource\", \"totelColumn\", \"totelAll\", \"withPaginator\", \"details\"]]; }, template: function ProductionsByTimeComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\", 0);\r\n        i0.ɵɵi18n(1, 1);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"date-range-select\", 2);\r\n        i0.ɵɵlistener(\"submitRange\", function ProductionsByTimeComponent_Template_date_range_select_submitRange_2_listener($event) { return ctx.getAllByDate($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"search-group-details\", 3);\r\n        i0.ɵɵlistener(\"details\", function ProductionsByTimeComponent_Template_search_group_details_details_3_listener($event) { return ctx.openDialog($event); });\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"mainColumns\", ctx.columnsShow)(\"detailsSource\", ctx.cashewSourceColumns)(\"totelColumn\", ctx.totelColumn)(\"totelAll\", ctx.totelAll)(\"withPaginator\", false);\r\n    } }, directives: [i5.DateRangeSelect, i6.SearchGroupDetailsComponent], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}