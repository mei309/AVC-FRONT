{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { ReplaySubject } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"./inventory.service\";\nimport * as i3 from \"../genral.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../tables/date-range-select.component\";\nimport * as i6 from \"@angular/material/tabs\";\nimport * as i7 from \"../tables/search-group-details.component\";\nexport class InventoryTransactionsComponent {\n  constructor(dialog, localService, genral, _Activatedroute, cdRef, router) {\n    this.dialog = dialog;\n    this.localService = localService;\n    this.genral = genral;\n    this._Activatedroute = _Activatedroute;\n    this.cdRef = cdRef;\n    this.router = router;\n    this.ItemsChangable = new ReplaySubject();\n    this.SuppliersChangable = new ReplaySubject();\n    this.tabIndex = 0;\n    this.columnsShow = [{\n      type: 'nameId',\n      name: 'item',\n      label: \"Item\",\n      search: 'selectObjObj',\n      options: this.ItemsChangable,\n      group: 'item'\n    }, {\n      type: 'stringComma',\n      name: 'poCodes',\n      label: \"PO#\",\n      search: 'normal',\n      group: 'poCodes'\n    }, {\n      type: 'stringComma',\n      name: 'suppliers',\n      label: \"Supplier\",\n      search: 'selectObj',\n      options: this.SuppliersChangable,\n      group: 'poCodes'\n    }, {\n      name: 'processName',\n      label: \"Process name\",\n      search: 'select',\n      options: this.genral.getProcess()\n    }, {\n      name: 'productionLine',\n      label: \"Production line\",\n      search: 'selectObj',\n      options: this.genral.getProductionLine('')\n    }, {\n      type: 'date',\n      name: 'receiptDate',\n      label: \"Receipt date\",\n      search: 'dates'\n    }, {\n      type: 'date',\n      name: 'transactionDate',\n      label: \"Transaction date\",\n      search: 'dates'\n    }, {\n      type: 'weight',\n      name: 'amountSubtracted',\n      label: \"Amount subtracted\",\n      search: 'objArray'\n    }, {\n      type: 'weight',\n      name: 'amountAdded',\n      label: \"Amount added\",\n      search: 'objArray'\n    }, {\n      type: 'normal',\n      label: \"Remarks\",\n      name: 'remarks',\n      search: 'normal'\n    }];\n  }\n\n  ngOnInit() {\n    this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n      if (params.get('number')) {\n        this.tabIndex = +params.get('number');\n      }\n    });\n\n    this.navigationSubscription = this.router.events.subscribe(e => {\n      // If it is a NavigationEnd event re-initalise the component\n      if (e instanceof NavigationEnd) {\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n          if (params.get('number')) {\n            this.tabIndex = +params.get('number');\n          } else {\n            this.tabIndex = 0;\n          }\n\n          this.changedAndDate(this.tabIndex);\n        });\n      }\n    });\n  }\n\n  changed(event) {\n    this.changedAndDate(event);\n  }\n\n  setDateRange($event) {\n    this.dateRange = $event;\n    this.changedAndDate(this.tabIndex);\n  }\n\n  changedAndDate(event) {\n    switch (+event) {\n      case 0:\n        this.inventorySource = null;\n        this.localService.getInventoryTransactions(this.dateRange, 'PRODUCT').pipe(take(1)).subscribe(value => {\n          this.inventorySource = value;\n        });\n        this.genral.getItemsCashew('').pipe(take(1)).subscribe(val => {\n          this.ItemsChangable.next(val);\n        });\n        this.genral.getSuppliersCashew().pipe(take(1)).subscribe(val => {\n          this.SuppliersChangable.next(val);\n        });\n        this.cdRef.detectChanges();\n        break;\n\n      case 1:\n        this.inventorySource = null;\n        this.localService.getInventoryTransactions(this.dateRange, 'GENERAL').pipe(take(1)).subscribe(value => {\n          this.inventorySource = value;\n        });\n        this.genral.getItemsGeneral().pipe(take(1)).subscribe(val => {\n          this.ItemsChangable.next(val);\n        });\n        this.genral.getSuppliersGeneral().pipe(take(1)).subscribe(val => {\n          this.SuppliersChangable.next(val);\n        });\n        this.cdRef.detectChanges();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.navigationSubscription) {\n      this.navigationSubscription.unsubscribe();\n    }\n\n    this.ItemsChangable.unsubscribe();\n    this.SuppliersChangable.unsubscribe();\n  }\n\n}\n\nInventoryTransactionsComponent.ɵfac = function InventoryTransactionsComponent_Factory(t) {\n  return new (t || InventoryTransactionsComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.InventoryService), i0.ɵɵdirectiveInject(i3.Genral), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.Router));\n};\n\nInventoryTransactionsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: InventoryTransactionsComponent,\n  selectors: [[\"app-inventory-transactions\"]],\n  decls: 7,\n  vars: 3,\n  consts: function () {\n    let i18n_0;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_2873544718243647369$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_1 = goog.getMsg(\"Inventory transactions\");\n      i18n_0 = MSG_EXTERNAL_2873544718243647369$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_1;\n    } else {\n      i18n_0 = \"Inventory transactions\";\n    }\n\n    let i18n_2;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_6512948890889947614$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_3 = goog.getMsg(\"Cashew\");\n      i18n_2 = MSG_EXTERNAL_6512948890889947614$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_3;\n    } else {\n      i18n_2 = \"Cashew\";\n    }\n\n    let i18n_4;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_6439365426343089851$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_5 = goog.getMsg(\"General\");\n      i18n_4 = MSG_EXTERNAL_6439365426343089851$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_5;\n    } else {\n      i18n_4 = \"General\";\n    }\n\n    return [[2, \"text-align\", \"center\"], i18n_0, [3, \"submitRange\"], [\"mat-stretch-tabs\", \"\", 1, \"spac-print\", 3, \"selectedIndex\", \"selectedIndexChange\"], [\"label\", i18n_2], [\"label\", i18n_4], [3, \"mainColumns\", \"detailsSource\"]];\n  },\n  template: function InventoryTransactionsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵi18n(1, 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"date-range-select\", 2);\n      i0.ɵɵlistener(\"submitRange\", function InventoryTransactionsComponent_Template_date_range_select_submitRange_2_listener($event) {\n        return ctx.setDateRange($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"mat-tab-group\", 3);\n      i0.ɵɵlistener(\"selectedIndexChange\", function InventoryTransactionsComponent_Template_mat_tab_group_selectedIndexChange_3_listener($event) {\n        return ctx.tabIndex = $event;\n      })(\"selectedIndexChange\", function InventoryTransactionsComponent_Template_mat_tab_group_selectedIndexChange_3_listener($event) {\n        return ctx.changed($event);\n      });\n      i0.ɵɵelement(4, \"mat-tab\", 4);\n      i0.ɵɵelement(5, \"mat-tab\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"search-group-details\", 6);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"selectedIndex\", ctx.tabIndex);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"mainColumns\", ctx.columnsShow)(\"detailsSource\", ctx.inventorySource);\n    }\n  },\n  directives: [i5.DateRangeSelect, i6.MatTabGroup, i6.MatTab, i7.SearchGroupDetailsComponent],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/isral/OneDrive/Documents/AVC-FRONT/src/app/inventory/transactions.component.ts"],"names":["NavigationEnd","ReplaySubject","take","i0","i1","i2","i3","i4","i5","i6","i7","InventoryTransactionsComponent","constructor","dialog","localService","genral","_Activatedroute","cdRef","router","ItemsChangable","SuppliersChangable","tabIndex","columnsShow","type","name","label","search","options","group","getProcess","getProductionLine","ngOnInit","paramMap","pipe","subscribe","params","get","navigationSubscription","events","e","changedAndDate","changed","event","setDateRange","$event","dateRange","inventorySource","getInventoryTransactions","value","getItemsCashew","val","next","getSuppliersCashew","detectChanges","getItemsGeneral","getSuppliersGeneral","ngOnDestroy","unsubscribe","ɵfac","InventoryTransactionsComponent_Factory","t","ɵɵdirectiveInject","MatDialog","InventoryService","Genral","ActivatedRoute","ChangeDetectorRef","Router","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","i18n_0","ngI18nClosureMode","MSG_EXTERNAL_2873544718243647369$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_1","goog","getMsg","i18n_2","MSG_EXTERNAL_6512948890889947614$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_3","i18n_4","MSG_EXTERNAL_6439365426343089851$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_5","template","InventoryTransactionsComponent_Template","rf","ctx","ɵɵelementStart","ɵɵi18n","ɵɵelementEnd","ɵɵlistener","InventoryTransactionsComponent_Template_date_range_select_submitRange_2_listener","InventoryTransactionsComponent_Template_mat_tab_group_selectedIndexChange_3_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","directives","DateRangeSelect","MatTabGroup","MatTab","SearchGroupDetailsComponent","encapsulation"],"mappings":"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","sourcesContent":["import { NavigationEnd } from '@angular/router';\r\nimport { ReplaySubject } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/material/dialog\";\r\nimport * as i2 from \"./inventory.service\";\r\nimport * as i3 from \"../genral.service\";\r\nimport * as i4 from \"@angular/router\";\r\nimport * as i5 from \"../tables/date-range-select.component\";\r\nimport * as i6 from \"@angular/material/tabs\";\r\nimport * as i7 from \"../tables/search-group-details.component\";\r\nexport class InventoryTransactionsComponent {\r\n    constructor(dialog, localService, genral, _Activatedroute, cdRef, router) {\r\n        this.dialog = dialog;\r\n        this.localService = localService;\r\n        this.genral = genral;\r\n        this._Activatedroute = _Activatedroute;\r\n        this.cdRef = cdRef;\r\n        this.router = router;\r\n        this.ItemsChangable = new ReplaySubject();\r\n        this.SuppliersChangable = new ReplaySubject();\r\n        this.tabIndex = 0;\r\n        this.columnsShow = [\r\n            {\r\n                type: 'nameId',\r\n                name: 'item',\r\n                label: $localize `Item`,\r\n                search: 'selectObjObj',\r\n                options: this.ItemsChangable,\r\n                group: 'item',\r\n            },\r\n            {\r\n                type: 'stringComma',\r\n                name: 'poCodes',\r\n                label: $localize `PO#`,\r\n                search: 'normal',\r\n                group: 'poCodes',\r\n            },\r\n            {\r\n                type: 'stringComma',\r\n                name: 'suppliers',\r\n                label: $localize `Supplier`,\r\n                search: 'selectObj',\r\n                options: this.SuppliersChangable,\r\n                group: 'poCodes',\r\n            },\r\n            {\r\n                name: 'processName',\r\n                label: $localize `Process name`,\r\n                search: 'select',\r\n                options: this.genral.getProcess(),\r\n            },\r\n            {\r\n                name: 'productionLine',\r\n                label: $localize `Production line`,\r\n                search: 'selectObj',\r\n                options: this.genral.getProductionLine(''),\r\n            },\r\n            {\r\n                type: 'date',\r\n                name: 'receiptDate',\r\n                label: $localize `Receipt date`,\r\n                search: 'dates',\r\n            },\r\n            {\r\n                type: 'date',\r\n                name: 'transactionDate',\r\n                label: $localize `Transaction date`,\r\n                search: 'dates',\r\n            },\r\n            {\r\n                type: 'weight',\r\n                name: 'amountSubtracted',\r\n                label: $localize `Amount subtracted`,\r\n                search: 'objArray',\r\n            },\r\n            {\r\n                type: 'weight',\r\n                name: 'amountAdded',\r\n                label: $localize `Amount added`,\r\n                search: 'objArray',\r\n            },\r\n            {\r\n                type: 'normal',\r\n                label: $localize `Remarks`,\r\n                name: 'remarks',\r\n                search: 'normal',\r\n            },\r\n        ];\r\n    }\r\n    ngOnInit() {\r\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n            if (params.get('number')) {\r\n                this.tabIndex = +params.get('number');\r\n            }\r\n        });\r\n        this.navigationSubscription = this.router.events.subscribe((e) => {\r\n            // If it is a NavigationEnd event re-initalise the component\r\n            if (e instanceof NavigationEnd) {\r\n                this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n                    if (params.get('number')) {\r\n                        this.tabIndex = +params.get('number');\r\n                    }\r\n                    else {\r\n                        this.tabIndex = 0;\r\n                    }\r\n                    this.changedAndDate(this.tabIndex);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    changed(event) {\r\n        this.changedAndDate(event);\r\n    }\r\n    setDateRange($event) {\r\n        this.dateRange = $event;\r\n        this.changedAndDate(this.tabIndex);\r\n    }\r\n    changedAndDate(event) {\r\n        switch (+event) {\r\n            case 0:\r\n                this.inventorySource = null;\r\n                this.localService.getInventoryTransactions(this.dateRange, 'PRODUCT').pipe(take(1)).subscribe(value => {\r\n                    this.inventorySource = value;\r\n                });\r\n                this.genral.getItemsCashew('').pipe(take(1)).subscribe(val => {\r\n                    this.ItemsChangable.next(val);\r\n                });\r\n                this.genral.getSuppliersCashew().pipe(take(1)).subscribe(val => {\r\n                    this.SuppliersChangable.next(val);\r\n                });\r\n                this.cdRef.detectChanges();\r\n                break;\r\n            case 1:\r\n                this.inventorySource = null;\r\n                this.localService.getInventoryTransactions(this.dateRange, 'GENERAL').pipe(take(1)).subscribe(value => {\r\n                    this.inventorySource = value;\r\n                });\r\n                this.genral.getItemsGeneral().pipe(take(1)).subscribe(val => {\r\n                    this.ItemsChangable.next(val);\r\n                });\r\n                this.genral.getSuppliersGeneral().pipe(take(1)).subscribe(val => {\r\n                    this.SuppliersChangable.next(val);\r\n                });\r\n                this.cdRef.detectChanges();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n        this.ItemsChangable.unsubscribe();\r\n        this.SuppliersChangable.unsubscribe();\r\n    }\r\n}\r\nInventoryTransactionsComponent.ɵfac = function InventoryTransactionsComponent_Factory(t) { return new (t || InventoryTransactionsComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.InventoryService), i0.ɵɵdirectiveInject(i3.Genral), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.Router)); };\r\nInventoryTransactionsComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: InventoryTransactionsComponent, selectors: [[\"app-inventory-transactions\"]], decls: 7, vars: 3, consts: function () { let i18n_0; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_2873544718243647369$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_1 = goog.getMsg(\"Inventory transactions\");\r\n        i18n_0 = MSG_EXTERNAL_2873544718243647369$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_1;\r\n    }\r\n    else {\r\n        i18n_0 = $localize `:␟3b7c175cd91b6257cb2144dec33edd3e39bd5cbb␟2873544718243647369:Inventory transactions`;\r\n    } let i18n_2; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_6512948890889947614$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_3 = goog.getMsg(\"Cashew\");\r\n        i18n_2 = MSG_EXTERNAL_6512948890889947614$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_3;\r\n    }\r\n    else {\r\n        i18n_2 = $localize `:␟254fec480fcac5e3ac9d48d5d02312080a8c91e3␟6512948890889947614:Cashew`;\r\n    } let i18n_4; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_6439365426343089851$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_5 = goog.getMsg(\"General\");\r\n        i18n_4 = MSG_EXTERNAL_6439365426343089851$$SRC_APP_INVENTORY_TRANSACTIONS_COMPONENT_TS_5;\r\n    }\r\n    else {\r\n        i18n_4 = $localize `:␟3d53f64033c4b76fdc1076ba15955d913209866c␟6439365426343089851:General`;\r\n    } return [[2, \"text-align\", \"center\"], i18n_0, [3, \"submitRange\"], [\"mat-stretch-tabs\", \"\", 1, \"spac-print\", 3, \"selectedIndex\", \"selectedIndexChange\"], [\"label\", i18n_2], [\"label\", i18n_4], [3, \"mainColumns\", \"detailsSource\"]]; }, template: function InventoryTransactionsComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\", 0);\r\n        i0.ɵɵi18n(1, 1);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"date-range-select\", 2);\r\n        i0.ɵɵlistener(\"submitRange\", function InventoryTransactionsComponent_Template_date_range_select_submitRange_2_listener($event) { return ctx.setDateRange($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"mat-tab-group\", 3);\r\n        i0.ɵɵlistener(\"selectedIndexChange\", function InventoryTransactionsComponent_Template_mat_tab_group_selectedIndexChange_3_listener($event) { return ctx.tabIndex = $event; })(\"selectedIndexChange\", function InventoryTransactionsComponent_Template_mat_tab_group_selectedIndexChange_3_listener($event) { return ctx.changed($event); });\r\n        i0.ɵɵelement(4, \"mat-tab\", 4);\r\n        i0.ɵɵelement(5, \"mat-tab\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(6, \"search-group-details\", 6);\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"selectedIndex\", ctx.tabIndex);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"mainColumns\", ctx.columnsShow)(\"detailsSource\", ctx.inventorySource);\r\n    } }, directives: [i5.DateRangeSelect, i6.MatTabGroup, i6.MatTab, i7.SearchGroupDetailsComponent], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}