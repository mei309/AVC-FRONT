{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { take } from 'rxjs/operators';\nimport { CounteinersDetailsDialogComponent } from './counteiners-details.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"./countiners.service\";\nimport * as i4 from \"./../genral.service\";\nimport * as i5 from \"../global-params.component\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"../tables/date-range-select.component\";\nimport * as i8 from \"@angular/material/tabs\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"../tables/search-group-details.component\";\nimport * as i11 from \"@angular/material/checkbox\";\nimport * as i12 from \"@angular/forms\";\n\nfunction CountinersReportsComponent_mat_checkbox_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-checkbox\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function CountinersReportsComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.withRealEta = $event;\n    })(\"ngModelChange\", function CountinersReportsComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.getRealEta();\n    });\n    i0.ɵɵi18n(1, 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.withRealEta)(\"disabled\", ctx_r0.withRealEta);\n  }\n}\n\nexport class CountinersReportsComponent {\n  constructor(router, dialog, localService, _Activatedroute, genral, cdRef, myGlobal) {\n    this.router = router;\n    this.dialog = dialog;\n    this.localService = localService;\n    this._Activatedroute = _Activatedroute;\n    this.genral = genral;\n    this.cdRef = cdRef;\n    this.myGlobal = myGlobal;\n    this.tabIndex = 0;\n    this.withRealEta = false;\n  }\n\n  ngOnInit() {\n    this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n      if (params.get('number')) {\n        this.tabIndex = +params.get('number');\n      }\n    });\n\n    this.navigationSubscription = this.router.events.subscribe(e => {\n      // If it is a NavigationEnd event re-initalise the component\n      if (e instanceof NavigationEnd) {\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n          if (params.get('number')) {\n            this.tabIndex = +params.get('number');\n          } else {\n            this.tabIndex = 0;\n          }\n\n          this.changedAndDate(this.tabIndex);\n        });\n      }\n    });\n  }\n\n  openDialog(event) {\n    const dialogRef = this.dialog.open(CounteinersDetailsDialogComponent, {\n      width: '80%',\n      data: {\n        id: event['id'],\n        fromNew: false,\n        type: this.type\n      }\n    });\n    dialogRef.afterClosed().subscribe(data => {\n      if (data === \"Edit\") {\n        switch (this.tabIndex) {\n          case 0:\n            this.router.navigate(['../Arrival', {\n              id: event['id']\n            }], {\n              relativeTo: this._Activatedroute\n            });\n            break;\n\n          case 1:\n            this.router.navigate(['../Loading', {\n              id: event['id']\n            }], {\n              relativeTo: this._Activatedroute\n            });\n            break;\n          // case 2:\n          //     this.router.navigate(['../Packing',{id: event['id'], poCodes: event['poCodeIds']}], { relativeTo: this._Activatedroute });\n          //     break;\n\n          default:\n            break;\n        }\n      } else if (dialogRef.componentInstance.approveChange) {\n        this.changedAndDate(this.tabIndex);\n      }\n    });\n  }\n\n  getRealEta() {\n    this.localService.getAllRealEta(this.dateRange).pipe(take(1)).subscribe(value => {\n      let array = [];\n      Object.keys(value).forEach(a => {\n        array.push({\n          key: a,\n          newEta: value[a]\n        });\n      });\n      let merged = [];\n\n      for (let i = 0; i < this.mainSourceColumns.length; i++) {\n        merged.push(Object.assign(Object.assign({}, this.mainSourceColumns[i]), array.find(itmInner => itmInner.key === this.mainSourceColumns[i]['containerNumber'])));\n      }\n\n      this.columnsShow.push({\n        type: 'date',\n        label: \"Real ETA\",\n        name: 'newEta',\n        search: 'dates'\n      });\n      this.mainSourceColumns = merged;\n      this.columnsShow = this.columnsShow.slice();\n      this.cdRef.detectChanges();\n    });\n  }\n\n  changed(event) {\n    this.changedAndDate(event);\n  }\n\n  setDateRange($event) {\n    this.dateRange = $event;\n    this.changedAndDate(this.tabIndex);\n  }\n\n  changedAndDate(event) {\n    switch (+event) {\n      case 0:\n        this.mainSourceColumns = null;\n        this.totelColumn = null;\n        this.columnsShow = [{\n          type: 'nameId',\n          name: 'shipmentCode',\n          label: \"Shipment code\",\n          search: 'object' // group: 'shipmentCode',\n\n        }, {\n          type: 'normal',\n          label: \"Container number\",\n          name: 'containerNumber',\n          search: 'normal' // group: 'shipmentCode',\n\n        }, {\n          type: 'nameId',\n          name: 'productCompany',\n          label: \"Product company\",\n          search: 'selectObjObj',\n          options: this.localService.getShippingSuppliers()\n        }, {\n          type: 'dateTime',\n          name: 'recordedTime',\n          label: \"Recorded time\",\n          search: 'dates'\n        }, // {\n        //     type: 'date',\n        //     label: 'Etd',\n        //     name: 'etd',\n        //     search: 'dates',\n        // },\n        {\n          type: 'date',\n          label: \"Eta\",\n          name: 'eta',\n          search: 'dates'\n        }, {\n          type: 'normal',\n          name: 'status',\n          label: \"Status\",\n          search: 'select',\n          options: this.genral.getProcessStatus()\n        }, {\n          type: 'arrayVal',\n          name: 'approvals',\n          label: \"Approvals\",\n          search: 'normal'\n        }];\n        this.localService.findContainerArrivals(this.dateRange).pipe(take(1)).subscribe(value => {\n          this.mainSourceColumns = value;\n        });\n        this.type = 'Arrivals';\n        this.cdRef.detectChanges();\n        break;\n\n      case 1:\n        this.mainSourceColumns = null;\n        this.totelColumn = {\n          type: 'weight2',\n          name: 'totalRow',\n          label: \"Total loaded\",\n          group: 'poCodes',\n          options: ['LBS', 'KG']\n        };\n        this.columnsShow = [{\n          type: 'nameId',\n          name: 'shipmentCode',\n          label: \"Shipment code\",\n          search: 'object',\n          group: 'shipmentCode'\n        }, {\n          type: 'normal',\n          label: \"Container number\",\n          name: 'containerNumber',\n          search: 'normal',\n          group: 'shipmentCode'\n        }, {\n          type: 'arrayVal',\n          name: 'poCodes',\n          label: \"PO#\",\n          search: 'normal',\n          group: 'poCodes'\n        }, {\n          type: 'dateTime',\n          name: 'recordedTime',\n          label: \"Recorded time\",\n          search: 'dates',\n          group: 'poCodes'\n        }, {\n          type: 'nameId',\n          name: 'item',\n          label: \"Product descrption\",\n          search: 'selectObjObj',\n          options: this.genral.getItemsCashew('RoastPacked')\n        }, {\n          type: 'weight2',\n          name: 'totalRow',\n          label: \"Loaded amounts\",\n          search: 'objArray'\n        }, {\n          type: 'normal',\n          name: 'status',\n          label: \"Status\",\n          search: 'select',\n          options: this.genral.getProcessStatus(),\n          group: 'shipmentCode'\n        }, // {\n        //     name: 'producedItems',\n        //     label: 'Produced items',\n        //     // type: 'object',\n        //     type: 'itemWeight',\n        //     // options: 'currency',\n        // },\n        {\n          name: 'loadedTotals',\n          type: 'kidArray',\n          collections: []\n        }];\n        this.localService.getAllLoadings(this.dateRange).pipe(take(1)).subscribe(value => {\n          this.mainSourceColumns = value;\n        });\n        this.type = 'Loading';\n        this.cdRef.detectChanges();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.navigationSubscription) {\n      this.navigationSubscription.unsubscribe();\n    }\n  }\n\n}\n\nCountinersReportsComponent.ɵfac = function CountinersReportsComponent_Factory(t) {\n  return new (t || CountinersReportsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.CountinersService), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Genral), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i5.Globals));\n};\n\nCountinersReportsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CountinersReportsComponent,\n  selectors: [[\"app-counteiners-reports\"]],\n  decls: 13,\n  vars: 5,\n  consts: function () {\n    let i18n_0;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_5794249155753174678$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_1 = goog.getMsg(\"New Arrival\");\n      i18n_0 = MSG_EXTERNAL_5794249155753174678$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_1;\n    } else {\n      i18n_0 = \"New Arrival\";\n    }\n\n    let i18n_2;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_9103359558735378024$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_3 = goog.getMsg(\"New Loading\");\n      i18n_2 = MSG_EXTERNAL_9103359558735378024$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_3;\n    } else {\n      i18n_2 = \"New Loading\";\n    }\n\n    let i18n_4;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_7044526391988318351$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_5 = goog.getMsg(\"Shipping reports\");\n      i18n_4 = MSG_EXTERNAL_7044526391988318351$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_5;\n    } else {\n      i18n_4 = \"Shipping reports\";\n    }\n\n    let i18n_6;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_2095697787631219118$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_7 = goog.getMsg(\"Arrivals\");\n      i18n_6 = MSG_EXTERNAL_2095697787631219118$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_7;\n    } else {\n      i18n_6 = \"Arrivals\";\n    }\n\n    let i18n_8;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_6851756775632708361$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_9 = goog.getMsg(\"Loadings\");\n      i18n_8 = MSG_EXTERNAL_6851756775632708361$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_9;\n    } else {\n      i18n_8 = \"Loadings\";\n    }\n\n    let i18n_10;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_5042203436465034470$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS__11 = goog.getMsg(\"Get real ETA (now only for one line later will add OOCL too)\");\n      i18n_10 = MSG_EXTERNAL_5042203436465034470$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS__11;\n    } else {\n      i18n_10 = \"Get real ETA (now only for one line later will add OOCL too)\";\n    }\n\n    return [[1, \"centerButtons\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"routerLink\", \"../Arrival\"], i18n_0, [\"mat-raised-button\", \"\", \"color\", \"primary\", \"routerLink\", \"../Loading\"], i18n_2, [2, \"text-align\", \"center\"], i18n_4, [3, \"submitRange\"], [\"mat-stretch-tabs\", \"\", 1, \"spac-print\", 3, \"selectedIndex\", \"selectedIndexChange\"], [\"label\", i18n_6], [3, \"ngModel\", \"disabled\", \"ngModelChange\", 4, \"ngIf\"], [\"label\", i18n_8], [3, \"mainColumns\", \"detailsSource\", \"totelColumn\", \"details\"], [3, \"ngModel\", \"disabled\", \"ngModelChange\"], i18n_10];\n  },\n  template: function CountinersReportsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"button\", 1);\n      i0.ɵɵi18n(2, 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"button\", 3);\n      i0.ɵɵi18n(4, 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"h1\", 5);\n      i0.ɵɵi18n(6, 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"date-range-select\", 7);\n      i0.ɵɵlistener(\"submitRange\", function CountinersReportsComponent_Template_date_range_select_submitRange_7_listener($event) {\n        return ctx.setDateRange($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"mat-tab-group\", 8);\n      i0.ɵɵlistener(\"selectedIndexChange\", function CountinersReportsComponent_Template_mat_tab_group_selectedIndexChange_8_listener($event) {\n        return ctx.tabIndex = $event;\n      })(\"selectedIndexChange\", function CountinersReportsComponent_Template_mat_tab_group_selectedIndexChange_8_listener($event) {\n        return ctx.changed($event);\n      });\n      i0.ɵɵelementStart(9, \"mat-tab\", 9);\n      i0.ɵɵtemplate(10, CountinersReportsComponent_mat_checkbox_10_Template, 2, 2, \"mat-checkbox\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"mat-tab\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"search-group-details\", 12);\n      i0.ɵɵlistener(\"details\", function CountinersReportsComponent_Template_search_group_details_details_12_listener($event) {\n        return ctx.openDialog($event);\n      });\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"selectedIndex\", ctx.tabIndex);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.myGlobal.isMe);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"mainColumns\", ctx.columnsShow)(\"detailsSource\", ctx.mainSourceColumns)(\"totelColumn\", ctx.totelColumn);\n    }\n  },\n  directives: [i6.MatButton, i1.RouterLink, i7.DateRangeSelect, i8.MatTabGroup, i8.MatTab, i9.NgIf, i10.SearchGroupDetailsComponent, i11.MatCheckbox, i12.NgControlStatus, i12.NgModel],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/isral/OneDrive/Documents/AVC-FRONT/src/app/countiners/counteiners-reports.component.ts"],"names":["NavigationEnd","take","CounteinersDetailsDialogComponent","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","i10","i11","i12","CountinersReportsComponent_mat_checkbox_10_Template","rf","ctx","_r2","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","CountinersReportsComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener","$event","ɵɵrestoreView","ctx_r1","ɵɵnextContext","withRealEta","ctx_r3","getRealEta","ɵɵi18n","ɵɵelementEnd","ctx_r0","ɵɵproperty","CountinersReportsComponent","constructor","router","dialog","localService","_Activatedroute","genral","cdRef","myGlobal","tabIndex","ngOnInit","paramMap","pipe","subscribe","params","get","navigationSubscription","events","e","changedAndDate","openDialog","event","dialogRef","open","width","data","id","fromNew","type","afterClosed","navigate","relativeTo","componentInstance","approveChange","getAllRealEta","dateRange","value","array","Object","keys","forEach","a","push","key","newEta","merged","i","mainSourceColumns","length","assign","find","itmInner","columnsShow","label","name","search","slice","detectChanges","changed","setDateRange","totelColumn","options","getShippingSuppliers","getProcessStatus","findContainerArrivals","group","getItemsCashew","collections","getAllLoadings","ngOnDestroy","unsubscribe","ɵfac","CountinersReportsComponent_Factory","t","ɵɵdirectiveInject","Router","MatDialog","CountinersService","ActivatedRoute","Genral","ChangeDetectorRef","Globals","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","i18n_0","ngI18nClosureMode","MSG_EXTERNAL_5794249155753174678$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_1","goog","getMsg","i18n_2","MSG_EXTERNAL_9103359558735378024$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_3","i18n_4","MSG_EXTERNAL_7044526391988318351$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_5","i18n_6","MSG_EXTERNAL_2095697787631219118$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_7","i18n_8","MSG_EXTERNAL_6851756775632708361$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_9","i18n_10","MSG_EXTERNAL_5042203436465034470$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS__11","template","CountinersReportsComponent_Template","CountinersReportsComponent_Template_date_range_select_submitRange_7_listener","CountinersReportsComponent_Template_mat_tab_group_selectedIndexChange_8_listener","ɵɵtemplate","ɵɵelement","CountinersReportsComponent_Template_search_group_details_details_12_listener","ɵɵadvance","isMe","directives","MatButton","RouterLink","DateRangeSelect","MatTabGroup","MatTab","NgIf","SearchGroupDetailsComponent","MatCheckbox","NgControlStatus","NgModel","encapsulation"],"mappings":"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","sourcesContent":["import { NavigationEnd } from '@angular/router';\r\nimport { take } from 'rxjs/operators';\r\nimport { CounteinersDetailsDialogComponent } from './counteiners-details.component';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"@angular/material/dialog\";\r\nimport * as i3 from \"./countiners.service\";\r\nimport * as i4 from \"./../genral.service\";\r\nimport * as i5 from \"../global-params.component\";\r\nimport * as i6 from \"@angular/material/button\";\r\nimport * as i7 from \"../tables/date-range-select.component\";\r\nimport * as i8 from \"@angular/material/tabs\";\r\nimport * as i9 from \"@angular/common\";\r\nimport * as i10 from \"../tables/search-group-details.component\";\r\nimport * as i11 from \"@angular/material/checkbox\";\r\nimport * as i12 from \"@angular/forms\";\r\nfunction CountinersReportsComponent_mat_checkbox_10_Template(rf, ctx) { if (rf & 1) {\r\n    const _r2 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"mat-checkbox\", 13);\r\n    i0.ɵɵlistener(\"ngModelChange\", function CountinersReportsComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener($event) { i0.ɵɵrestoreView(_r2); const ctx_r1 = i0.ɵɵnextContext(); return ctx_r1.withRealEta = $event; })(\"ngModelChange\", function CountinersReportsComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener() { i0.ɵɵrestoreView(_r2); const ctx_r3 = i0.ɵɵnextContext(); return ctx_r3.getRealEta(); });\r\n    i0.ɵɵi18n(1, 14);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.withRealEta)(\"disabled\", ctx_r0.withRealEta);\r\n} }\r\nexport class CountinersReportsComponent {\r\n    constructor(router, dialog, localService, _Activatedroute, genral, cdRef, myGlobal) {\r\n        this.router = router;\r\n        this.dialog = dialog;\r\n        this.localService = localService;\r\n        this._Activatedroute = _Activatedroute;\r\n        this.genral = genral;\r\n        this.cdRef = cdRef;\r\n        this.myGlobal = myGlobal;\r\n        this.tabIndex = 0;\r\n        this.withRealEta = false;\r\n    }\r\n    ngOnInit() {\r\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n            if (params.get('number')) {\r\n                this.tabIndex = +params.get('number');\r\n            }\r\n        });\r\n        this.navigationSubscription = this.router.events.subscribe((e) => {\r\n            // If it is a NavigationEnd event re-initalise the component\r\n            if (e instanceof NavigationEnd) {\r\n                this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n                    if (params.get('number')) {\r\n                        this.tabIndex = +params.get('number');\r\n                    }\r\n                    else {\r\n                        this.tabIndex = 0;\r\n                    }\r\n                    this.changedAndDate(this.tabIndex);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    openDialog(event) {\r\n        const dialogRef = this.dialog.open(CounteinersDetailsDialogComponent, {\r\n            width: '80%',\r\n            data: { id: event['id'], fromNew: false, type: this.type },\r\n        });\r\n        dialogRef.afterClosed().subscribe(data => {\r\n            if (data === $localize `Edit`) {\r\n                switch (this.tabIndex) {\r\n                    case 0:\r\n                        this.router.navigate(['../Arrival', { id: event['id'] }], { relativeTo: this._Activatedroute });\r\n                        break;\r\n                    case 1:\r\n                        this.router.navigate(['../Loading', { id: event['id'] }], { relativeTo: this._Activatedroute });\r\n                        break;\r\n                    // case 2:\r\n                    //     this.router.navigate(['../Packing',{id: event['id'], poCodes: event['poCodeIds']}], { relativeTo: this._Activatedroute });\r\n                    //     break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n            else if (dialogRef.componentInstance.approveChange) {\r\n                this.changedAndDate(this.tabIndex);\r\n            }\r\n        });\r\n    }\r\n    getRealEta() {\r\n        this.localService.getAllRealEta(this.dateRange).pipe(take(1)).subscribe(value => {\r\n            let array = [];\r\n            Object.keys(value).forEach(a => {\r\n                array.push({ key: a, newEta: value[a] });\r\n            });\r\n            let merged = [];\r\n            for (let i = 0; i < this.mainSourceColumns.length; i++) {\r\n                merged.push(Object.assign(Object.assign({}, this.mainSourceColumns[i]), (array.find((itmInner) => itmInner.key === this.mainSourceColumns[i]['containerNumber']))));\r\n            }\r\n            this.columnsShow.push({\r\n                type: 'date',\r\n                label: $localize `Real ETA`,\r\n                name: 'newEta',\r\n                search: 'dates',\r\n            });\r\n            this.mainSourceColumns = merged;\r\n            this.columnsShow = this.columnsShow.slice();\r\n            this.cdRef.detectChanges();\r\n        });\r\n    }\r\n    changed(event) {\r\n        this.changedAndDate(event);\r\n    }\r\n    setDateRange($event) {\r\n        this.dateRange = $event;\r\n        this.changedAndDate(this.tabIndex);\r\n    }\r\n    changedAndDate(event) {\r\n        switch (+event) {\r\n            case 0:\r\n                this.mainSourceColumns = null;\r\n                this.totelColumn = null;\r\n                this.columnsShow = [\r\n                    {\r\n                        type: 'nameId',\r\n                        name: 'shipmentCode',\r\n                        label: $localize `Shipment code`,\r\n                        search: 'object',\r\n                        // group: 'shipmentCode',\r\n                    },\r\n                    {\r\n                        type: 'normal',\r\n                        label: $localize `Container number`,\r\n                        name: 'containerNumber',\r\n                        search: 'normal',\r\n                        // group: 'shipmentCode',\r\n                    },\r\n                    {\r\n                        type: 'nameId',\r\n                        name: 'productCompany',\r\n                        label: $localize `Product company`,\r\n                        search: 'selectObjObj',\r\n                        options: this.localService.getShippingSuppliers(),\r\n                    },\r\n                    {\r\n                        type: 'dateTime',\r\n                        name: 'recordedTime',\r\n                        label: $localize `Recorded time`,\r\n                        search: 'dates',\r\n                    },\r\n                    // {\r\n                    //     type: 'date',\r\n                    //     label: 'Etd',\r\n                    //     name: 'etd',\r\n                    //     search: 'dates',\r\n                    // },\r\n                    {\r\n                        type: 'date',\r\n                        label: $localize `Eta`,\r\n                        name: 'eta',\r\n                        search: 'dates',\r\n                    },\r\n                    {\r\n                        type: 'normal',\r\n                        name: 'status',\r\n                        label: $localize `Status`,\r\n                        search: 'select',\r\n                        options: this.genral.getProcessStatus(),\r\n                    },\r\n                    {\r\n                        type: 'arrayVal',\r\n                        name: 'approvals',\r\n                        label: $localize `Approvals`,\r\n                        search: 'normal',\r\n                    }\r\n                ];\r\n                this.localService.findContainerArrivals(this.dateRange).pipe(take(1)).subscribe(value => {\r\n                    this.mainSourceColumns = value;\r\n                });\r\n                this.type = 'Arrivals';\r\n                this.cdRef.detectChanges();\r\n                break;\r\n            case 1:\r\n                this.mainSourceColumns = null;\r\n                this.totelColumn = {\r\n                    type: 'weight2',\r\n                    name: 'totalRow',\r\n                    label: $localize `Total loaded`,\r\n                    group: 'poCodes',\r\n                    options: ['LBS', 'KG']\r\n                };\r\n                this.columnsShow = [\r\n                    {\r\n                        type: 'nameId',\r\n                        name: 'shipmentCode',\r\n                        label: $localize `Shipment code`,\r\n                        search: 'object',\r\n                        group: 'shipmentCode',\r\n                    },\r\n                    {\r\n                        type: 'normal',\r\n                        label: $localize `Container number`,\r\n                        name: 'containerNumber',\r\n                        search: 'normal',\r\n                        group: 'shipmentCode',\r\n                    },\r\n                    {\r\n                        type: 'arrayVal',\r\n                        name: 'poCodes',\r\n                        label: $localize `PO#`,\r\n                        search: 'normal',\r\n                        group: 'poCodes',\r\n                    },\r\n                    {\r\n                        type: 'dateTime',\r\n                        name: 'recordedTime',\r\n                        label: $localize `Recorded time`,\r\n                        search: 'dates',\r\n                        group: 'poCodes',\r\n                    },\r\n                    {\r\n                        type: 'nameId',\r\n                        name: 'item',\r\n                        label: $localize `Product descrption`,\r\n                        search: 'selectObjObj',\r\n                        options: this.genral.getItemsCashew('RoastPacked'),\r\n                    },\r\n                    {\r\n                        type: 'weight2',\r\n                        name: 'totalRow',\r\n                        label: $localize `Loaded amounts`,\r\n                        search: 'objArray',\r\n                    },\r\n                    {\r\n                        type: 'normal',\r\n                        name: 'status',\r\n                        label: $localize `Status`,\r\n                        search: 'select',\r\n                        options: this.genral.getProcessStatus(),\r\n                        group: 'shipmentCode',\r\n                    },\r\n                    // {\r\n                    //     name: 'producedItems',\r\n                    //     label: 'Produced items',\r\n                    //     // type: 'object',\r\n                    //     type: 'itemWeight',\r\n                    //     // options: 'currency',\r\n                    // },\r\n                    {\r\n                        name: 'loadedTotals',\r\n                        type: 'kidArray',\r\n                        collections: []\r\n                    }\r\n                ];\r\n                this.localService.getAllLoadings(this.dateRange).pipe(take(1)).subscribe(value => {\r\n                    this.mainSourceColumns = value;\r\n                });\r\n                this.type = 'Loading';\r\n                this.cdRef.detectChanges();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n    }\r\n}\r\nCountinersReportsComponent.ɵfac = function CountinersReportsComponent_Factory(t) { return new (t || CountinersReportsComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.CountinersService), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Genral), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i5.Globals)); };\r\nCountinersReportsComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CountinersReportsComponent, selectors: [[\"app-counteiners-reports\"]], decls: 13, vars: 5, consts: function () { let i18n_0; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_5794249155753174678$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_1 = goog.getMsg(\"New Arrival\");\r\n        i18n_0 = MSG_EXTERNAL_5794249155753174678$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_1;\r\n    }\r\n    else {\r\n        i18n_0 = $localize `:␟8fdad97997c55bf87eb125b7d9579a5223904906␟5794249155753174678:New Arrival`;\r\n    } let i18n_2; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_9103359558735378024$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_3 = goog.getMsg(\"New Loading\");\r\n        i18n_2 = MSG_EXTERNAL_9103359558735378024$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_3;\r\n    }\r\n    else {\r\n        i18n_2 = $localize `:␟ac98d79a595c9edc7b2f1faa3c7d1547f6042cdd␟9103359558735378024:New Loading`;\r\n    } let i18n_4; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_7044526391988318351$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_5 = goog.getMsg(\"Shipping reports\");\r\n        i18n_4 = MSG_EXTERNAL_7044526391988318351$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_5;\r\n    }\r\n    else {\r\n        i18n_4 = $localize `:␟8edf7d19ca14a8dd7e3a86a931213677ca13dcc1␟7044526391988318351:Shipping reports`;\r\n    } let i18n_6; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_2095697787631219118$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_7 = goog.getMsg(\"Arrivals\");\r\n        i18n_6 = MSG_EXTERNAL_2095697787631219118$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_7;\r\n    }\r\n    else {\r\n        i18n_6 = $localize `:␟a095e9ca9b5a0dfad841d9970686503eddcaf5aa␟2095697787631219118:Arrivals`;\r\n    } let i18n_8; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_6851756775632708361$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_9 = goog.getMsg(\"Loadings\");\r\n        i18n_8 = MSG_EXTERNAL_6851756775632708361$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS_9;\r\n    }\r\n    else {\r\n        i18n_8 = $localize `:␟1e0b82da5cf65b82c7a17d8f904b914528183d2d␟6851756775632708361:Loadings`;\r\n    } let i18n_10; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_5042203436465034470$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS__11 = goog.getMsg(\"Get real ETA (now only for one line later will add OOCL too)\");\r\n        i18n_10 = MSG_EXTERNAL_5042203436465034470$$SRC_APP_COUNTINERS_COUNTEINERS_REPORTS_COMPONENT_TS__11;\r\n    }\r\n    else {\r\n        i18n_10 = $localize `:␟674f82039b99b16b347fc43fe4480ec10ea920c4␟5042203436465034470:Get real ETA (now only for one line later will add OOCL too)`;\r\n    } return [[1, \"centerButtons\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", \"routerLink\", \"../Arrival\"], i18n_0, [\"mat-raised-button\", \"\", \"color\", \"primary\", \"routerLink\", \"../Loading\"], i18n_2, [2, \"text-align\", \"center\"], i18n_4, [3, \"submitRange\"], [\"mat-stretch-tabs\", \"\", 1, \"spac-print\", 3, \"selectedIndex\", \"selectedIndexChange\"], [\"label\", i18n_6], [3, \"ngModel\", \"disabled\", \"ngModelChange\", 4, \"ngIf\"], [\"label\", i18n_8], [3, \"mainColumns\", \"detailsSource\", \"totelColumn\", \"details\"], [3, \"ngModel\", \"disabled\", \"ngModelChange\"], i18n_10]; }, template: function CountinersReportsComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"button\", 1);\r\n        i0.ɵɵi18n(2, 2);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"button\", 3);\r\n        i0.ɵɵi18n(4, 4);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"h1\", 5);\r\n        i0.ɵɵi18n(6, 6);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"date-range-select\", 7);\r\n        i0.ɵɵlistener(\"submitRange\", function CountinersReportsComponent_Template_date_range_select_submitRange_7_listener($event) { return ctx.setDateRange($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(8, \"mat-tab-group\", 8);\r\n        i0.ɵɵlistener(\"selectedIndexChange\", function CountinersReportsComponent_Template_mat_tab_group_selectedIndexChange_8_listener($event) { return ctx.tabIndex = $event; })(\"selectedIndexChange\", function CountinersReportsComponent_Template_mat_tab_group_selectedIndexChange_8_listener($event) { return ctx.changed($event); });\r\n        i0.ɵɵelementStart(9, \"mat-tab\", 9);\r\n        i0.ɵɵtemplate(10, CountinersReportsComponent_mat_checkbox_10_Template, 2, 2, \"mat-checkbox\", 10);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(11, \"mat-tab\", 11);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(12, \"search-group-details\", 12);\r\n        i0.ɵɵlistener(\"details\", function CountinersReportsComponent_Template_search_group_details_details_12_listener($event) { return ctx.openDialog($event); });\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(8);\r\n        i0.ɵɵproperty(\"selectedIndex\", ctx.tabIndex);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.myGlobal.isMe);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"mainColumns\", ctx.columnsShow)(\"detailsSource\", ctx.mainSourceColumns)(\"totelColumn\", ctx.totelColumn);\r\n    } }, directives: [i6.MatButton, i1.RouterLink, i7.DateRangeSelect, i8.MatTabGroup, i8.MatTab, i9.NgIf, i10.SearchGroupDetailsComponent, i11.MatCheckbox, i12.NgControlStatus, i12.NgModel], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}