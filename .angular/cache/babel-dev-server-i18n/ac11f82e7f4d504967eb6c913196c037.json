{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { NavigationEnd } from '@angular/router';\nimport { isEqual, map } from 'lodash-es';\nimport { distinctUntilChanged, take, throttleTime } from 'rxjs/operators';\nimport { diff } from '../libraries/diffArrayObjects.interface';\nimport { CounteinersDetailsDialogComponent } from './counteiners-details.component';\nimport { cloneDeep } from 'lodash-es';\nimport { ReplaySubject, Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./countiners.service\";\nimport * as i4 from \"../genral.service\";\nimport * as i5 from \"@angular/material/dialog\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"../components/dynamic-form/dynamic-form.component\";\nimport * as i8 from \"../components/dynamic-field/dynamic-field.directive\";\nimport * as i9 from \"@angular/material/button\";\nconst _c0 = [\"first\"];\nconst _c1 = [\"second\"];\n\nfunction CountinersLoadingComponent_ng_container_2_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"dynamic-form\", 9, 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"fields\", ctx_r3.regConfig)(\"putData\", ctx_r3.dataSource);\n  }\n}\n\nfunction CountinersLoadingComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 4);\n    i0.ɵɵelement(1, \"dynamic-form\", 5, 6);\n    i0.ɵɵelementContainer(3, 7);\n    i0.ɵɵtemplate(4, CountinersLoadingComponent_ng_container_2_div_4_Template, 3, 2, \"div\", 8);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"fields\", ctx_r0.beginConfig)(\"putData\", ctx_r0.putFirstData);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"field\", ctx_r0.poConfig)(\"group\", ctx_r0.form);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFormAvailable);\n  }\n}\n\nfunction CountinersLoadingComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵelementStart(1, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function CountinersLoadingComponent_div_3_Template_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.oneClickChanged.next($event);\n    });\n    i0.ɵɵi18n(2, 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function CountinersLoadingComponent_div_3_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.onResetBoth();\n    });\n    i0.ɵɵi18n(4, 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class CountinersLoadingComponent {\n  constructor(fb, _Activatedroute, router, cdRef, localService, genral, dialog) {\n    this.fb = fb;\n    this._Activatedroute = _Activatedroute;\n    this.router = router;\n    this.cdRef = cdRef;\n    this.localService = localService;\n    this.genral = genral;\n    this.dialog = dialog;\n    this.allShipmentCodes = new ReplaySubject();\n    this.allContainers = new ReplaySubject();\n    this.choosedPos = [];\n    this.regConfig = [];\n    this.oneClickChanged = new Subject();\n    this.dataSource = {\n      usedItemsTable: [],\n      usedItemsNormal: [],\n      materialUsed: []\n    };\n    this.isNew = true;\n    this.isFormAvailable = false;\n    this.beginPage = true;\n    this.removeIds = [];\n  } // removeIdsTable = [];\n\n\n  onSubmitBoth() {\n    var firstData = this.formFirst.onSubmitOutside();\n    var secondData = this.formSecond ? this.formSecond.onSubmitOutside() : false;\n\n    if (secondData && firstData) {\n      var arr = [];\n\n      if (secondData['usedItemsNormal']) {\n        secondData['usedItemsNormal'].forEach(element => {\n          element['storageMoves'] = element['storageMoves'].filter(amou => amou.numberUsedUnits);\n          element['groupName'] = 'normalPosLoading';\n        });\n        secondData['usedItemsNormal'] = secondData['usedItemsNormal'].filter(amou => amou.storageMoves.length);\n        arr = arr.concat(secondData['usedItemsNormal']);\n        delete secondData['usedItemsNormal'];\n      }\n\n      if (secondData['usedItemsTable']) {\n        secondData['usedItemsTable'].forEach(element => {\n          element['storageMove']['amounts'] = element['storageMove']['amounts'].filter(amou => amou.take);\n          element['storageMove']['amounts'].forEach(ele => {\n            if (!ele['storageId']) {\n              ele['storageId'] = ele['id'];\n              delete ele['id'];\n              ele['storageVersion'] = ele['version'];\n              delete ele['version'];\n            }\n          });\n          element['groupName'] = 'tablePosLoading';\n        });\n        secondData['usedItemsTable'] = secondData['usedItemsTable'].filter(amou => amou.storageMove.amounts.length);\n        arr = arr.concat(secondData['usedItemsTable']);\n        delete secondData['usedItemsTable'];\n      }\n\n      if (secondData['materialUsed']) {\n        secondData['materialUsed'].forEach(element => {\n          element['storageMoves'] = element['storageMoves'].filter(amou => amou.numberUsedUnits);\n          element['groupName'] = 'meterialUsedPos';\n        });\n        secondData['materialUsed'] = secondData['materialUsed'].filter(amou => amou.storageMoves.length);\n        arr = arr.concat(secondData['materialUsed']);\n        delete secondData['materialUsed'];\n      }\n\n      firstData['storageMovesGroups'] = arr; // firstData['loadedItems'] = secondData['loadedItems'];\n      // var proccesItems = [];\n      // this.processData.forEach(element => {\n      //     if(element) {\n      //         element['storage']['amounts'].forEach(et => {\n      //             delete et['id'];\n      //             delete et['version'];\n      //         });\n      //         // element['storage']['warehouseLocation'] = element['warehouseLocation'];\n      //         delete element['storage']['item'];\n      //         var cpoyProcess = {item: element['item'], groupName: element['groupName'], storage: element['storage']}\n      //         proccesItems.push(cpoyProcess);\n      //     }\n      // });\n      // this.firstData['processItems'] = proccesItems;\n\n      this.genral.getProductionLine('Loading').pipe(take(1)).subscribe(val1 => {\n        firstData['productionLine'] = val1[0];\n        this.localService.addEditLoading(firstData, this.isNew).pipe(take(1)).subscribe(val => {\n          const dialogRef = this.dialog.open(CounteinersDetailsDialogComponent, {\n            width: '80%',\n            data: {\n              loading: cloneDeep(val),\n              fromNew: true,\n              type: 'Loading'\n            }\n          });\n          dialogRef.afterClosed().subscribe(result => {\n            switch (result) {\n              case \"Edit\":\n                this.beginPage = false;\n                this.choosedPos = [];\n                this.dataSource = {\n                  usedItemsTable: [],\n                  usedItemsNormal: [],\n                  materialUsed: []\n                };\n                this.putFirstData = null;\n                this.removeIds = []; // this.removeIdsTable = [];\n\n                this.cdRef.detectChanges();\n                this.localService.getLoading(val['id']).pipe(take(1)).subscribe(val1 => {\n                  this.fillEdit(val1);\n                });\n                break;\n\n              case \"Security Doc\":\n                this.router.navigate(['../SecurityExportDoc', {\n                  id: val['id'],\n                  docType: 'Security'\n                }], {\n                  relativeTo: this._Activatedroute\n                });\n                break;\n\n              case \"Export Doc\":\n                this.router.navigate(['../SecurityExportDoc', {\n                  id: val['id'],\n                  docType: 'Export'\n                }], {\n                  relativeTo: this._Activatedroute\n                });\n                break;\n\n              default:\n                this.router.navigate(['../CountinerReports', {\n                  number: 1\n                }], {\n                  relativeTo: this._Activatedroute\n                });\n                break;\n            }\n          });\n        });\n      });\n    }\n  }\n\n  onResetBoth() {\n    this.formFirst.onReset();\n\n    if (this.formSecond) {\n      this.formSecond.onReset();\n    }\n  }\n\n  setRawSecondValue() {\n    if (this.formSecond) {\n      this.dataSource = this.formSecond.value;\n\n      if (!this.dataSource['usedItemsTable']) {\n        this.dataSource['usedItemsTable'] = [];\n      }\n\n      if (!this.dataSource['usedItemsNormal']) {\n        this.dataSource['usedItemsNormal'] = [];\n      } // if(!this.dataSource['loadedItems']){\n      //     this.dataSource['loadedItems'] = [];\n      // }\n\n    }\n  }\n\n  addToForm(val) {\n    var arrNormal = [];\n    var arrTable = []; // var arrDeclared = [];\n\n    var arrUsedItems = [];\n    val === null || val === void 0 ? void 0 : val.forEach(element => {\n      if (element['storage']) {\n        // if((element['storage']['amounts'] = element['storage']['amounts'].filter(amou => !this.removeIdsTable.includes(amou.id))).length) {\n        element['storage']['item'] = element['item'];\n        element['storage']['itemPoCodes'] = element['poCodes'];\n        element['storage']['itemSuppliers'] = element['suppliers'];\n        element['storage']['measureUnit'] = element['measureUnit'];\n        element['storage']['itemProcessDate'] = element['itemProcessDate'];\n        element['storage']['amounts'].forEach(ele => {\n          ele['amount'] = ele['numberAvailableUnits']; // this.removeIdsTable.push(ele['id']);\n        });\n        arrTable.push({\n          storageMove: element['storage']\n        }); // }\n      } else if (element['storageForms']) {\n        element['storageForms'].forEach(ele => {\n          if (!this.removeIds.includes(ele['id'])) {\n            arrUsedItems.push({\n              itemPoCodes: element['poCodes'],\n              itemSuppliers: element['suppliers'],\n              item: element['item'],\n              itemProcessDate: element['itemProcessDate'],\n              measureUnit: element['measureUnit'],\n              storage: ele\n            });\n            delete ele['numberUsedUnits'];\n            this.removeIds.push(ele['id']);\n          }\n        });\n      } // arrDeclared.push({poCode: element['poCode'], item: element['item']});\n\n    });\n\n    if (arrUsedItems.length) {\n      arrNormal.push({\n        storageMoves: arrUsedItems\n      });\n    }\n\n    if (arrTable.length) {\n      this.dataSource['usedItemsTable'] = this.dataSource['usedItemsTable'].concat(arrTable);\n    }\n\n    if (arrNormal.length) {\n      this.dataSource['usedItemsNormal'] = this.dataSource['usedItemsNormal'].concat(arrNormal);\n    } // if(arrDeclared.length) {\n    //     this.dataSource['loadedItems'] = this.dataSource['loadedItems'].concat(arrDeclared);\n    // }\n\n  }\n\n  addWanted() {\n    var ind = this.regConfig.findIndex(em => em['name'] === 'usedItemsNormal');\n\n    if (this.dataSource['usedItemsNormal'].length) {\n      if (ind === -1) {\n        this.addNormal();\n      }\n    } else if (ind !== -1) {\n      this.regConfig.splice(ind, 1);\n    }\n\n    var mnd = this.regConfig.findIndex(em => em['name'] === 'usedItemsTable');\n\n    if (this.dataSource['usedItemsTable'].length) {\n      if (mnd === -1) {\n        this.addTable();\n      }\n    } else if (mnd !== -1) {\n      this.regConfig.splice(mnd, 1);\n    }\n  }\n\n  preperChoosingPO() {\n    this.form = this.fb.group({});\n    this.form.addControl('poCodes', this.fb.array([this.fb.group({\n      poCode: null\n    })]));\n    this.form.get('poCodes').valueChanges.pipe(distinctUntilChanged()).subscribe(selectedValue => {\n      selectedValue = selectedValue.filter(ele => ele.poCode && ele.poCode.id);\n      selectedValue = map(selectedValue, 'poCode');\n\n      if (selectedValue.length && !isEqual(selectedValue, this.choosedPos)) {\n        this.setRawSecondValue();\n        var result = diff(this.choosedPos, selectedValue, 'id', {\n          updatedValues: 1\n        });\n        var numberOfObsrevers = result['added'].length; // + result['removed'].length;\n\n        if (numberOfObsrevers) {\n          this.isFormAvailable = false;\n        }\n\n        result['added'].forEach(el => {\n          this.localService.getStorageRoastPackedPo(el.id).pipe(take(1)).subscribe(val => {\n            this.addToForm(val);\n            numberOfObsrevers--;\n\n            if (!numberOfObsrevers) {\n              this.addWanted();\n              this.isFormAvailable = true;\n            }\n          });\n        }); // result['removed'].forEach(el => {\n        //     numberOfObsrevers--;\n        //     if(!numberOfObsrevers) {\n        //         this.addWanted();\n        //         this.isFormAvailable = true;\n        //     }\n        // });\n\n        this.choosedPos = selectedValue;\n      }\n    });\n    this.poConfig = {\n      type: 'bigexpand',\n      name: 'poCodes',\n      label: \"Loading PO#s\",\n      options: 'aloneInline',\n      collections: [{\n        type: 'selectgroup',\n        inputType: 'supplierName',\n        options: this.localService.getAllPosRoastPacked(),\n        collections: [{\n          type: 'select',\n          label: \"Supplier\"\n        }, {\n          type: 'select',\n          label: \"#PO\",\n          name: 'poCode',\n          collections: 'somewhere'\n        }]\n      }, {\n        type: 'divider',\n        inputType: 'divide'\n      }]\n    };\n  }\n\n  fillEdit(val) {\n    var _a;\n\n    var arrNormal = [];\n    var arrTable = [];\n    var arrMaterial = [];\n    (_a = val['storageMovesGroups']) === null || _a === void 0 ? void 0 : _a.forEach(element => {\n      if (element['groupName'].startsWith('table')) {\n        element['storageMove']['amounts'].forEach(ele => {\n          ele['take'] = true; // this.removeIdsTable.push(ele['id']);\n        });\n        arrTable.push(element);\n      } else if (element['groupName'].startsWith('normal')) {\n        element['storageMoves'].forEach(el => {\n          el['storage']['numberAvailableUnits'] = el['numberAvailableUnits'];\n          this.removeIds.push(el['storage']['id']);\n        });\n        arrNormal.push(element);\n      } else if (element['groupName'].startsWith('meterial')) {\n        element['storageMoves'].forEach(el => {\n          el['storage']['numberAvailableUnits'] = el['numberAvailableUnits'];\n        });\n        arrMaterial.push(element);\n      }\n    });\n    delete val['storageMovesGroups'];\n    this.dataSource['loadedItems'] = val['loadedItems'];\n    delete val['loadedItems'];\n    this.putFirstData = val; // this.dataSource = val;\n\n    if (arrTable.length) {\n      this.dataSource['usedItemsTable'] = arrTable;\n    }\n\n    if (arrNormal.length) {\n      this.dataSource['usedItemsNormal'] = arrNormal;\n    }\n\n    if (arrMaterial.length) {\n      this.dataSource['materialUsed'] = arrMaterial;\n    }\n\n    this.addWanted();\n    this.isNew = false;\n    this.beginPage = true;\n    this.isFormAvailable = true;\n  }\n\n  ngOnInit() {\n    this.addLoaded();\n\n    this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n      if (params.get('id')) {\n        var id = +params.get('id');\n        this.beginPage = false;\n        this.localService.getLoading(id).pipe(take(1)).subscribe(val => {\n          this.fillEdit(val);\n          this.localService.findFreeShipmentCodes().pipe(take(1)).subscribe(val1 => {\n            this.allShipmentCodes.next(val1.concat(val['shipmentCode']));\n          });\n          this.localService.findFreeArrivals().pipe(take(1)).subscribe(val2 => {\n            this.allContainers.next(val2.concat(val['arrival']));\n          });\n        });\n      } else {\n        this.localService.findFreeShipmentCodes().pipe(take(1)).subscribe(val1 => {\n          this.allShipmentCodes.next(val1);\n        });\n        this.localService.findFreeArrivals().pipe(take(1)).subscribe(val2 => {\n          this.allContainers.next(val2);\n        });\n      }\n    });\n\n    this.isFormAvailable = true;\n    this.beginConfig = [{\n      type: 'date',\n      label: \"Date\",\n      value: 'timeNow',\n      name: 'recordedTime',\n      options: 'withTime',\n      validations: [{\n        name: 'required',\n        validator: Validators.required,\n        message: \"Date Required\"\n      }]\n    }, {\n      type: 'select',\n      label: \"Shipment code\",\n      name: 'shipmentCode',\n      options: this.allShipmentCodes,\n      // disable: true,\n      collections: 'somewhere',\n      validations: [{\n        name: 'required',\n        validator: Validators.required,\n        message: \"Shipment code Required\"\n      }]\n    }, {\n      type: 'select',\n      label: \"Container\",\n      name: 'arrival',\n      options: this.allContainers,\n      // disable: true,\n      collections: 'somewhere',\n      validations: [{\n        name: 'required',\n        validator: Validators.required,\n        message: \"Container Required\"\n      }]\n    } // {\n    //   type: 'bignotexpand',\n    //   label: 'Shipment code',\n    //   name: 'shipmentCode',\n    //   collections: [\n    //       {\n    //           type: 'input',\n    //           label: 'Code',\n    //           name: 'code',\n    //           inputType: 'numeric',\n    //           disable: true,\n    //           validations: [\n    //             {\n    //                 name: 'required',\n    //                 validator: Validators.required,\n    //                 message: 'Code Required',\n    //             }\n    //           ]\n    //       },\n    //       {\n    //           type: 'select',\n    //           label: 'Destination port',\n    //           name: 'portOfDischarge',\n    //           options: this.genral.getShippingPorts(),\n    //           validations: [\n    //                 {\n    //                     name: 'required',\n    //                     validator: Validators.required,\n    //                     message: 'Destination port Required',\n    //                 }\n    //             ]\n    //       },\n    //   ],\n    // },\n    // {\n    //   type: 'bignotexpand',\n    //   label: 'Container details',\n    //   name: 'containerDetails',\n    //   collections: [\n    //       {\n    //           type: 'input',\n    //           label: 'Container number',\n    //           name: 'containerNumber',\n    //           validations: [\n    //             {\n    //                 name: 'required',\n    //                 validator: Validators.required,\n    //                 message: 'Container number Required',\n    //             }\n    //           ]\n    //       },\n    //       {\n    //           type: 'input',\n    //           label: 'Seal number',\n    //           name: 'sealNumber',\n    //           validations: [\n    //             {\n    //                 name: 'required',\n    //                 validator: Validators.required,\n    //                 message: 'Seal number Required',\n    //             }\n    //           ]\n    //       },\n    //       {\n    //           type: 'selectNormal',\n    //           label: 'Container type',\n    //           name: 'containerType',\n    //         //   value: '20\\'',\n    //           options: this.genral.getShippingContainerType(),\n    //           validations: [\n    //             {\n    //                 name: 'required',\n    //                 validator: Validators.required,\n    //                 message: 'Container type Required',\n    //             }\n    //           ]\n    //       },\n    //   ],\n    // },\n    // {\n    //   type: 'bignotexpand',\n    //   label: 'Shiping details',\n    //   name: 'shipingDetails',\n    //   value: 'required',\n    //   collections: [\n    //       {\n    //           type: 'input',\n    //           label: 'Booking number',\n    //           name: 'bookingNumber',\n    //       },\n    //       {\n    //           type: 'input',\n    //           label: 'Vessel',\n    //           name: 'vessel',\n    //       },\n    //       {\n    //           type: 'input',\n    //           label: 'Shipping company',\n    //           name: 'shippingCompany',\n    //       },\n    //       {\n    //           type: 'select',\n    //           label: 'Loading port',\n    //           name: 'portOfLoading',\n    //           options: this.genral.getShippingPorts(),\n    //       },\n    //       {\n    //           type: 'date',\n    //           label: 'Etd',\n    //           name: 'etd',\n    //           // value: new Date()\n    //           validations: [\n    //             {\n    //                 name: 'required',\n    //                 validator: Validators.required,\n    //                 message: 'Etd Required',\n    //             }\n    //           ]\n    //       },\n    //       {\n    //           type: 'select',\n    //           label: 'Destination port',\n    //           name: 'portOfDischarge',\n    //           options: this.genral.getShippingPorts(),\n    //       },\n    //       {\n    //         type: 'date',\n    //         label: 'Eta',\n    //         name: 'eta',\n    //         // value: new Date()\n    //         validations: [\n    //             {\n    //                 name: 'required',\n    //                 validator: Validators.required,\n    //                 message: 'Eta Required',\n    //             }\n    //           ]\n    //       },\n    //   ],\n    // },\n    ];\n    this.preperChoosingPO();\n    this.oneClickOnlySubscription = this.oneClickChanged.pipe(throttleTime(1100), distinctUntilChanged()).subscribe(event => {\n      event.preventDefault();\n      event.stopPropagation();\n      this.onSubmitBoth();\n    });\n    this.navigationSubscription = this.router.events.subscribe(e => {\n      // If it is a NavigationEnd event re-initalise the component\n      if (e instanceof NavigationEnd) {\n        this.beginPage = false;\n        this.isFormAvailable = false;\n        this.choosedPos = [];\n        this.dataSource = {\n          usedItemsTable: [],\n          usedItemsNormal: [],\n          materialUsed: []\n        };\n        this.removeIds = []; // this.removeIdsTable = [];\n\n        this.putFirstData = null;\n        this.preperChoosingPO();\n        this.cdRef.detectChanges();\n        this.beginPage = true;\n        this.localService.findFreeShipmentCodes().pipe(take(1)).subscribe(val => {\n          this.allShipmentCodes.next(val);\n        });\n        this.localService.findFreeArrivals().pipe(take(1)).subscribe(val => {\n          this.allContainers.next(val);\n        });\n      }\n    });\n  }\n\n  addLoaded() {\n    this.regConfig = [{\n      type: 'bigexpand',\n      name: 'materialUsed',\n      label: \"Material used\",\n      options: 'aloneNoAdd',\n      collections: [{\n        type: 'materialUsage',\n        // label: 'Transfer from',\n        name: 'storageMoves',\n        collections: [{\n          type: 'selectgroup',\n          inputType: 'supplierName',\n          // options: this.localService.getAllPosRoastPacked(),\n          disable: true,\n          collections: [{\n            type: 'select',\n            label: \"Supplier\"\n          }, {\n            type: 'select',\n            label: \"#PO\",\n            name: 'itemPo',\n            collections: 'somewhere'\n          }]\n        }, {\n          type: 'select',\n          label: \"Item\",\n          name: 'item',\n          disable: true\n        }, {\n          type: 'date',\n          label: \"Process date\",\n          name: 'itemProcessDate',\n          disable: true\n        }, {\n          type: 'input',\n          label: \"Weight unit\",\n          name: 'measureUnit',\n          disable: true\n        }, {\n          type: 'bignotexpand',\n          name: 'storage',\n          collections: [{\n            type: 'input',\n            label: \"Number of units\",\n            name: 'numberUnits',\n            disable: true\n          }, {\n            type: 'input',\n            name: 'unitAmount',\n            label: \"Unit weight\",\n            disable: true //     collections: [\n            //         {\n            //             type: 'input',\n            //             label: 'Unit weight',\n            //             name: 'amount',\n            //         },\n            //         {\n            //             type: 'select',\n            //             label: 'Weight unit',\n            //             name: 'measureUnit',\n            //         },\n            //     ]\n\n          }, {\n            type: 'select',\n            label: \"Warehouse location\",\n            name: 'warehouseLocation',\n            disable: true\n          }, {\n            type: 'input',\n            label: \"Number available units\",\n            name: 'numberAvailableUnits',\n            disable: true\n          }]\n        }]\n      }]\n    }];\n  }\n\n  addNormal() {\n    this.regConfig.splice(0, 0, {\n      type: 'bigexpand',\n      name: 'usedItemsNormal',\n      label: \"Transfer from\",\n      options: 'aloneNoAdd',\n      collections: [{\n        type: 'tableWithInput',\n        // label: 'Transfer from',\n        name: 'storageMoves',\n        options: 'numberUsedUnits',\n        collections: [{\n          type: 'input',\n          label: \"#PO\",\n          name: 'itemPoCodes',\n          disable: true\n        }, {\n          type: 'input',\n          label: \"Supplier\",\n          name: 'itemSuppliers',\n          disable: true\n        }, {\n          type: 'select',\n          label: \"Item\",\n          name: 'item',\n          disable: true\n        }, {\n          type: 'dateTime',\n          label: \"Process date\",\n          name: 'itemProcessDate',\n          disable: true\n        }, {\n          type: 'input',\n          label: \"Weight unit\",\n          name: 'measureUnit'\n        }, {\n          type: 'bignotexpand',\n          name: 'storage',\n          collections: [{\n            type: 'input',\n            label: \"Number of units\",\n            name: 'numberUnits',\n            disable: true\n          }, {\n            type: 'input',\n            name: 'unitAmount',\n            label: \"Unit weight\",\n            disable: true // collections: [\n            //     {\n            //         type: 'input',\n            //         label: 'Unit weight',\n            //         name: 'amount',\n            //     },\n            //     {\n            //         type: 'select',\n            //         label: 'Weight unit',\n            //         name: 'measureUnit',\n            //     },\n            // ]\n\n          }, {\n            type: 'select',\n            label: \"Warehouse location\",\n            name: 'warehouseLocation',\n            disable: true\n          }, {\n            type: 'input',\n            label: \"Number available units\",\n            name: 'numberAvailableUnits',\n            disable: true\n          }]\n        }]\n      }]\n    });\n  }\n\n  addTable() {\n    var index = this.regConfig[0] && this.regConfig[0]['name'] === 'usedItemsNormal' ? 1 : 0;\n    this.regConfig.splice(index, 0, {\n      type: 'bigexpand',\n      name: 'usedItemsTable',\n      label: \"Transfer from\",\n      options: 'aloneNoAdd',\n      collections: [{\n        type: 'bignotexpand',\n        name: 'storageMove',\n        // label: 'Transfer from',\n        options: 'aloneNoAdd',\n        collections: [{\n          type: 'input',\n          label: \"#PO\",\n          name: 'itemPoCodes',\n          disable: true\n        }, {\n          type: 'input',\n          label: \"Supplier\",\n          name: 'itemSuppliers',\n          disable: true\n        }, {\n          type: 'inputReadonlySelect',\n          label: \"Item descrption\",\n          name: 'item',\n          disable: true\n        }, {\n          type: 'date',\n          label: \"Process date\",\n          name: 'itemProcessDate',\n          disable: true\n        }, {\n          type: 'inputReadonly',\n          label: \"Weight unit\",\n          name: 'measureUnit',\n          disable: true\n        }, {\n          type: 'inputReadonlySelect',\n          label: \"Warehouse location\",\n          name: 'warehouseLocation',\n          disable: true\n        }, // {\n        //     type: 'inputReadonly',\n        //     label: 'Empty container weight',\n        //     name: 'containerWeight',\n        //     disable: true,\n        // },\n        {\n          type: 'arrayordinal',\n          label: \"Unit weight\",\n          name: 'amounts',\n          inputType: 'choose',\n          options: 3,\n          collections: 30\n        }]\n      }]\n    });\n  }\n\n  ngOnDestroy() {\n    if (this.navigationSubscription) {\n      this.navigationSubscription.unsubscribe();\n    }\n\n    this.allShipmentCodes.unsubscribe();\n    this.allContainers.unsubscribe();\n    this.oneClickOnlySubscription.unsubscribe();\n  }\n\n}\n\nCountinersLoadingComponent.ɵfac = function CountinersLoadingComponent_Factory(t) {\n  return new (t || CountinersLoadingComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i3.CountinersService), i0.ɵɵdirectiveInject(i4.Genral), i0.ɵɵdirectiveInject(i5.MatDialog));\n};\n\nCountinersLoadingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CountinersLoadingComponent,\n  selectors: [[\"countiners-loading\"]],\n  viewQuery: function CountinersLoadingComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formFirst = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formSecond = _t.first);\n    }\n  },\n  decls: 4,\n  vars: 2,\n  consts: function () {\n    let i18n_2;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_7619560701830330401$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS_3 = goog.getMsg(\"Loading\");\n      i18n_2 = MSG_EXTERNAL_7619560701830330401$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS_3;\n    } else {\n      i18n_2 = \"Loading\";\n    }\n\n    let i18n_4;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_1570156168541437739$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__5 = goog.getMsg(\"Loading information\");\n      i18n_4 = MSG_EXTERNAL_1570156168541437739$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__5;\n    } else {\n      i18n_4 = \"Loading information\";\n    }\n\n    let i18n_6;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_2453918270401236823$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS___7 = goog.getMsg(\"Material to load\");\n      i18n_6 = MSG_EXTERNAL_2453918270401236823$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS___7;\n    } else {\n      i18n_6 = \"Material to load\";\n    }\n\n    let i18n_8;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_935187492052582731$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__9 = goog.getMsg(\"Submit\");\n      i18n_8 = MSG_EXTERNAL_935187492052582731$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__9;\n    } else {\n      i18n_8 = \"Submit\";\n    }\n\n    let i18n_10;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_7808756054397155068$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__11 = goog.getMsg(\"Reset\");\n      i18n_10 = MSG_EXTERNAL_7808756054397155068$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__11;\n    } else {\n      i18n_10 = \"Reset\";\n    }\n\n    return [[2, \"text-align\", \"center\"], i18n_2, [\"mat-stretch-tabs\", \"\", 4, \"ngIf\"], [\"class\", \"margin-top\", \"style\", \"text-align:right\", 4, \"ngIf\"], [\"mat-stretch-tabs\", \"\"], [\"mainLabel\", i18n_4, 3, \"fields\", \"putData\"], [\"first\", \"\"], [\"dynamicField\", \"\", 3, \"field\", \"group\"], [4, \"ngIf\"], [\"mainLabel\", i18n_6, 3, \"fields\", \"putData\"], [\"second\", \"\"], [1, \"margin-top\", 2, \"text-align\", \"right\"], [\"type\", \"button\", \"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"min-width\", \"150px\", \"margin-right\", \"45px\", 3, \"click\"], i18n_8, [\"type\", \"button\", \"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"min-width\", \"150px\", 3, \"click\"], i18n_10];\n  },\n  template: function CountinersLoadingComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵi18n(1, 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, CountinersLoadingComponent_ng_container_2_Template, 5, 5, \"ng-container\", 2);\n      i0.ɵɵtemplate(3, CountinersLoadingComponent_div_3_Template, 5, 0, \"div\", 3);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.beginPage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.isFormAvailable);\n    }\n  },\n  directives: [i6.NgIf, i7.DynamicFormComponent, i8.DynamicFieldDirective, i9.MatButton],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/isral/OneDrive/Documents/AVC-FRONT/src/app/countiners/countiners-loading.component.ts"],"names":["Validators","NavigationEnd","isEqual","map","distinctUntilChanged","take","throttleTime","diff","CounteinersDetailsDialogComponent","cloneDeep","ReplaySubject","Subject","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","_c0","_c1","CountinersLoadingComponent_ng_container_2_div_4_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ctx_r3","ɵɵnextContext","ɵɵadvance","ɵɵproperty","regConfig","dataSource","CountinersLoadingComponent_ng_container_2_Template","ɵɵelementContainerStart","ɵɵelementContainer","ɵɵtemplate","ɵɵelementContainerEnd","ctx_r0","beginConfig","putFirstData","poConfig","form","isFormAvailable","CountinersLoadingComponent_div_3_Template","_r6","ɵɵgetCurrentView","ɵɵlistener","CountinersLoadingComponent_div_3_Template_button_click_1_listener","$event","ɵɵrestoreView","ctx_r5","oneClickChanged","next","ɵɵi18n","CountinersLoadingComponent_div_3_Template_button_click_3_listener","ctx_r7","onResetBoth","CountinersLoadingComponent","constructor","fb","_Activatedroute","router","cdRef","localService","genral","dialog","allShipmentCodes","allContainers","choosedPos","usedItemsTable","usedItemsNormal","materialUsed","isNew","beginPage","removeIds","onSubmitBoth","firstData","formFirst","onSubmitOutside","secondData","formSecond","arr","forEach","element","filter","amou","numberUsedUnits","storageMoves","length","concat","ele","storageMove","amounts","getProductionLine","pipe","subscribe","val1","addEditLoading","val","dialogRef","open","width","data","loading","fromNew","type","afterClosed","result","detectChanges","getLoading","fillEdit","navigate","id","docType","relativeTo","number","onReset","setRawSecondValue","value","addToForm","arrNormal","arrTable","arrUsedItems","push","includes","itemPoCodes","itemSuppliers","item","itemProcessDate","measureUnit","storage","addWanted","ind","findIndex","em","addNormal","splice","mnd","addTable","preperChoosingPO","group","addControl","array","poCode","get","valueChanges","selectedValue","updatedValues","numberOfObsrevers","el","getStorageRoastPackedPo","name","label","options","collections","inputType","getAllPosRoastPacked","_a","arrMaterial","startsWith","ngOnInit","addLoaded","paramMap","params","findFreeShipmentCodes","findFreeArrivals","val2","validations","validator","required","message","oneClickOnlySubscription","event","preventDefault","stopPropagation","navigationSubscription","events","e","disable","index","ngOnDestroy","unsubscribe","ɵfac","CountinersLoadingComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","ActivatedRoute","Router","ChangeDetectorRef","CountinersService","Genral","MatDialog","ɵcmp","ɵɵdefineComponent","selectors","viewQuery","CountinersLoadingComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","consts","i18n_2","ngI18nClosureMode","MSG_EXTERNAL_7619560701830330401$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS_3","goog","getMsg","i18n_4","MSG_EXTERNAL_1570156168541437739$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__5","i18n_6","MSG_EXTERNAL_2453918270401236823$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS___7","i18n_8","MSG_EXTERNAL_935187492052582731$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__9","i18n_10","MSG_EXTERNAL_7808756054397155068$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__11","template","CountinersLoadingComponent_Template","directives","NgIf","DynamicFormComponent","DynamicFieldDirective","MatButton","encapsulation"],"mappings":"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","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport { NavigationEnd } from '@angular/router';\r\nimport { isEqual, map } from 'lodash-es';\r\nimport { distinctUntilChanged, take, throttleTime } from 'rxjs/operators';\r\nimport { diff } from '../libraries/diffArrayObjects.interface';\r\nimport { CounteinersDetailsDialogComponent } from './counteiners-details.component';\r\nimport { cloneDeep } from 'lodash-es';\r\nimport { ReplaySubject, Subject } from 'rxjs';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"./countiners.service\";\r\nimport * as i4 from \"../genral.service\";\r\nimport * as i5 from \"@angular/material/dialog\";\r\nimport * as i6 from \"@angular/common\";\r\nimport * as i7 from \"../components/dynamic-form/dynamic-form.component\";\r\nimport * as i8 from \"../components/dynamic-field/dynamic-field.directive\";\r\nimport * as i9 from \"@angular/material/button\";\r\nconst _c0 = [\"first\"];\r\nconst _c1 = [\"second\"];\r\nfunction CountinersLoadingComponent_ng_container_2_div_4_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\");\r\n    i0.ɵɵelement(1, \"dynamic-form\", 9, 10);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r3 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"fields\", ctx_r3.regConfig)(\"putData\", ctx_r3.dataSource);\r\n} }\r\nfunction CountinersLoadingComponent_ng_container_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0, 4);\r\n    i0.ɵɵelement(1, \"dynamic-form\", 5, 6);\r\n    i0.ɵɵelementContainer(3, 7);\r\n    i0.ɵɵtemplate(4, CountinersLoadingComponent_ng_container_2_div_4_Template, 3, 2, \"div\", 8);\r\n    i0.ɵɵelementContainerEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"fields\", ctx_r0.beginConfig)(\"putData\", ctx_r0.putFirstData);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"field\", ctx_r0.poConfig)(\"group\", ctx_r0.form);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isFormAvailable);\r\n} }\r\nfunction CountinersLoadingComponent_div_3_Template(rf, ctx) { if (rf & 1) {\r\n    const _r6 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 11);\r\n    i0.ɵɵelementStart(1, \"button\", 12);\r\n    i0.ɵɵlistener(\"click\", function CountinersLoadingComponent_div_3_Template_button_click_1_listener($event) { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.oneClickChanged.next($event); });\r\n    i0.ɵɵi18n(2, 13);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(3, \"button\", 14);\r\n    i0.ɵɵlistener(\"click\", function CountinersLoadingComponent_div_3_Template_button_click_3_listener() { i0.ɵɵrestoreView(_r6); const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.onResetBoth(); });\r\n    i0.ɵɵi18n(4, 15);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} }\r\nexport class CountinersLoadingComponent {\r\n    constructor(fb, _Activatedroute, router, cdRef, localService, genral, dialog) {\r\n        this.fb = fb;\r\n        this._Activatedroute = _Activatedroute;\r\n        this.router = router;\r\n        this.cdRef = cdRef;\r\n        this.localService = localService;\r\n        this.genral = genral;\r\n        this.dialog = dialog;\r\n        this.allShipmentCodes = new ReplaySubject();\r\n        this.allContainers = new ReplaySubject();\r\n        this.choosedPos = [];\r\n        this.regConfig = [];\r\n        this.oneClickChanged = new Subject();\r\n        this.dataSource = { usedItemsTable: [], usedItemsNormal: [], materialUsed: [] };\r\n        this.isNew = true;\r\n        this.isFormAvailable = false;\r\n        this.beginPage = true;\r\n        this.removeIds = [];\r\n    }\r\n    // removeIdsTable = [];\r\n    onSubmitBoth() {\r\n        var firstData = this.formFirst.onSubmitOutside();\r\n        var secondData = this.formSecond ? this.formSecond.onSubmitOutside() : false;\r\n        if (secondData && firstData) {\r\n            var arr = [];\r\n            if (secondData['usedItemsNormal']) {\r\n                secondData['usedItemsNormal'].forEach(element => {\r\n                    element['storageMoves'] = element['storageMoves'].filter(amou => amou.numberUsedUnits);\r\n                    element['groupName'] = 'normalPosLoading';\r\n                });\r\n                secondData['usedItemsNormal'] = secondData['usedItemsNormal'].filter(amou => amou.storageMoves.length);\r\n                arr = arr.concat(secondData['usedItemsNormal']);\r\n                delete secondData['usedItemsNormal'];\r\n            }\r\n            if (secondData['usedItemsTable']) {\r\n                secondData['usedItemsTable'].forEach(element => {\r\n                    element['storageMove']['amounts'] = element['storageMove']['amounts'].filter(amou => amou.take);\r\n                    element['storageMove']['amounts'].forEach(ele => {\r\n                        if (!ele['storageId']) {\r\n                            ele['storageId'] = ele['id'];\r\n                            delete ele['id'];\r\n                            ele['storageVersion'] = ele['version'];\r\n                            delete ele['version'];\r\n                        }\r\n                    });\r\n                    element['groupName'] = 'tablePosLoading';\r\n                });\r\n                secondData['usedItemsTable'] = secondData['usedItemsTable'].filter(amou => amou.storageMove.amounts.length);\r\n                arr = arr.concat(secondData['usedItemsTable']);\r\n                delete secondData['usedItemsTable'];\r\n            }\r\n            if (secondData['materialUsed']) {\r\n                secondData['materialUsed'].forEach(element => {\r\n                    element['storageMoves'] = element['storageMoves'].filter(amou => amou.numberUsedUnits);\r\n                    element['groupName'] = 'meterialUsedPos';\r\n                });\r\n                secondData['materialUsed'] = secondData['materialUsed'].filter(amou => amou.storageMoves.length);\r\n                arr = arr.concat(secondData['materialUsed']);\r\n                delete secondData['materialUsed'];\r\n            }\r\n            firstData['storageMovesGroups'] = arr;\r\n            // firstData['loadedItems'] = secondData['loadedItems'];\r\n            // var proccesItems = [];\r\n            // this.processData.forEach(element => {\r\n            //     if(element) {\r\n            //         element['storage']['amounts'].forEach(et => {\r\n            //             delete et['id'];\r\n            //             delete et['version'];\r\n            //         });\r\n            //         // element['storage']['warehouseLocation'] = element['warehouseLocation'];\r\n            //         delete element['storage']['item'];\r\n            //         var cpoyProcess = {item: element['item'], groupName: element['groupName'], storage: element['storage']}\r\n            //         proccesItems.push(cpoyProcess);\r\n            //     }\r\n            // });\r\n            // this.firstData['processItems'] = proccesItems;\r\n            this.genral.getProductionLine('Loading').pipe(take(1)).subscribe(val1 => {\r\n                firstData['productionLine'] = val1[0];\r\n                this.localService.addEditLoading(firstData, this.isNew).pipe(take(1)).subscribe(val => {\r\n                    const dialogRef = this.dialog.open(CounteinersDetailsDialogComponent, {\r\n                        width: '80%',\r\n                        data: { loading: cloneDeep(val), fromNew: true, type: 'Loading' }\r\n                    });\r\n                    dialogRef.afterClosed().subscribe(result => {\r\n                        switch (result) {\r\n                            case $localize `Edit`:\r\n                                this.beginPage = false;\r\n                                this.choosedPos = [];\r\n                                this.dataSource = { usedItemsTable: [], usedItemsNormal: [], materialUsed: [] };\r\n                                this.putFirstData = null;\r\n                                this.removeIds = [];\r\n                                // this.removeIdsTable = [];\r\n                                this.cdRef.detectChanges();\r\n                                this.localService.getLoading(val['id']).pipe(take(1)).subscribe(val1 => {\r\n                                    this.fillEdit(val1);\r\n                                });\r\n                                break;\r\n                            case $localize `Security Doc`:\r\n                                this.router.navigate(['../SecurityExportDoc', { id: val['id'], docType: 'Security' }], { relativeTo: this._Activatedroute });\r\n                                break;\r\n                            case $localize `Export Doc`:\r\n                                this.router.navigate(['../SecurityExportDoc', { id: val['id'], docType: 'Export' }], { relativeTo: this._Activatedroute });\r\n                                break;\r\n                            default:\r\n                                this.router.navigate(['../CountinerReports', { number: 1 }], { relativeTo: this._Activatedroute });\r\n                                break;\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    }\r\n    onResetBoth() {\r\n        this.formFirst.onReset();\r\n        if (this.formSecond) {\r\n            this.formSecond.onReset();\r\n        }\r\n    }\r\n    setRawSecondValue() {\r\n        if (this.formSecond) {\r\n            this.dataSource = this.formSecond.value;\r\n            if (!this.dataSource['usedItemsTable']) {\r\n                this.dataSource['usedItemsTable'] = [];\r\n            }\r\n            if (!this.dataSource['usedItemsNormal']) {\r\n                this.dataSource['usedItemsNormal'] = [];\r\n            }\r\n            // if(!this.dataSource['loadedItems']){\r\n            //     this.dataSource['loadedItems'] = [];\r\n            // }\r\n        }\r\n    }\r\n    addToForm(val) {\r\n        var arrNormal = [];\r\n        var arrTable = [];\r\n        // var arrDeclared = [];\r\n        var arrUsedItems = [];\r\n        val === null || val === void 0 ? void 0 : val.forEach(element => {\r\n            if (element['storage']) {\r\n                // if((element['storage']['amounts'] = element['storage']['amounts'].filter(amou => !this.removeIdsTable.includes(amou.id))).length) {\r\n                element['storage']['item'] = element['item'];\r\n                element['storage']['itemPoCodes'] = element['poCodes'];\r\n                element['storage']['itemSuppliers'] = element['suppliers'];\r\n                element['storage']['measureUnit'] = element['measureUnit'];\r\n                element['storage']['itemProcessDate'] = element['itemProcessDate'];\r\n                element['storage']['amounts'].forEach(ele => {\r\n                    ele['amount'] = ele['numberAvailableUnits'];\r\n                    // this.removeIdsTable.push(ele['id']);\r\n                });\r\n                arrTable.push({ storageMove: element['storage'] });\r\n                // }\r\n            }\r\n            else if (element['storageForms']) {\r\n                element['storageForms'].forEach(ele => {\r\n                    if (!this.removeIds.includes(ele['id'])) {\r\n                        arrUsedItems.push({ itemPoCodes: element['poCodes'], itemSuppliers: element['suppliers'], item: element['item'], itemProcessDate: element['itemProcessDate'], measureUnit: element['measureUnit'], storage: ele });\r\n                        delete ele['numberUsedUnits'];\r\n                        this.removeIds.push(ele['id']);\r\n                    }\r\n                });\r\n            }\r\n            // arrDeclared.push({poCode: element['poCode'], item: element['item']});\r\n        });\r\n        if (arrUsedItems.length) {\r\n            arrNormal.push({ storageMoves: arrUsedItems });\r\n        }\r\n        if (arrTable.length) {\r\n            this.dataSource['usedItemsTable'] = this.dataSource['usedItemsTable'].concat(arrTable);\r\n        }\r\n        if (arrNormal.length) {\r\n            this.dataSource['usedItemsNormal'] = this.dataSource['usedItemsNormal'].concat(arrNormal);\r\n        }\r\n        // if(arrDeclared.length) {\r\n        //     this.dataSource['loadedItems'] = this.dataSource['loadedItems'].concat(arrDeclared);\r\n        // }\r\n    }\r\n    addWanted() {\r\n        var ind = this.regConfig.findIndex((em) => em['name'] === 'usedItemsNormal');\r\n        if (this.dataSource['usedItemsNormal'].length) {\r\n            if (ind === -1) {\r\n                this.addNormal();\r\n            }\r\n        }\r\n        else if (ind !== -1) {\r\n            this.regConfig.splice(ind, 1);\r\n        }\r\n        var mnd = this.regConfig.findIndex((em) => em['name'] === 'usedItemsTable');\r\n        if (this.dataSource['usedItemsTable'].length) {\r\n            if (mnd === -1) {\r\n                this.addTable();\r\n            }\r\n        }\r\n        else if (mnd !== -1) {\r\n            this.regConfig.splice(mnd, 1);\r\n        }\r\n    }\r\n    preperChoosingPO() {\r\n        this.form = this.fb.group({});\r\n        this.form.addControl('poCodes', this.fb.array([this.fb.group({ poCode: null })]));\r\n        this.form.get('poCodes').valueChanges.pipe(distinctUntilChanged()).subscribe(selectedValue => {\r\n            selectedValue = selectedValue.filter(ele => ele.poCode && ele.poCode.id);\r\n            selectedValue = map(selectedValue, 'poCode');\r\n            if (selectedValue.length && !isEqual(selectedValue, this.choosedPos)) {\r\n                this.setRawSecondValue();\r\n                var result = diff(this.choosedPos, selectedValue, 'id', { updatedValues: 1 });\r\n                var numberOfObsrevers = result['added'].length; // + result['removed'].length;\r\n                if (numberOfObsrevers) {\r\n                    this.isFormAvailable = false;\r\n                }\r\n                result['added'].forEach(el => {\r\n                    this.localService.getStorageRoastPackedPo(el.id).pipe(take(1)).subscribe(val => {\r\n                        this.addToForm(val);\r\n                        numberOfObsrevers--;\r\n                        if (!numberOfObsrevers) {\r\n                            this.addWanted();\r\n                            this.isFormAvailable = true;\r\n                        }\r\n                    });\r\n                });\r\n                // result['removed'].forEach(el => {\r\n                //     numberOfObsrevers--;\r\n                //     if(!numberOfObsrevers) {\r\n                //         this.addWanted();\r\n                //         this.isFormAvailable = true;\r\n                //     }\r\n                // });\r\n                this.choosedPos = selectedValue;\r\n            }\r\n        });\r\n        this.poConfig =\r\n            {\r\n                type: 'bigexpand',\r\n                name: 'poCodes',\r\n                label: $localize `Loading PO#s`,\r\n                options: 'aloneInline',\r\n                collections: [\r\n                    {\r\n                        type: 'selectgroup',\r\n                        inputType: 'supplierName',\r\n                        options: this.localService.getAllPosRoastPacked(),\r\n                        collections: [\r\n                            {\r\n                                type: 'select',\r\n                                label: $localize `Supplier`,\r\n                            },\r\n                            {\r\n                                type: 'select',\r\n                                label: $localize `#PO`,\r\n                                name: 'poCode',\r\n                                collections: 'somewhere',\r\n                            },\r\n                        ]\r\n                    },\r\n                    {\r\n                        type: 'divider',\r\n                        inputType: 'divide'\r\n                    },\r\n                ]\r\n            };\r\n    }\r\n    fillEdit(val) {\r\n        var _a;\r\n        var arrNormal = [];\r\n        var arrTable = [];\r\n        var arrMaterial = [];\r\n        (_a = val['storageMovesGroups']) === null || _a === void 0 ? void 0 : _a.forEach(element => {\r\n            if (element['groupName'].startsWith('table')) {\r\n                element['storageMove']['amounts'].forEach(ele => {\r\n                    ele['take'] = true;\r\n                    // this.removeIdsTable.push(ele['id']);\r\n                });\r\n                arrTable.push(element);\r\n            }\r\n            else if (element['groupName'].startsWith('normal')) {\r\n                element['storageMoves'].forEach(el => {\r\n                    el['storage']['numberAvailableUnits'] = el['numberAvailableUnits'];\r\n                    this.removeIds.push(el['storage']['id']);\r\n                });\r\n                arrNormal.push(element);\r\n            }\r\n            else if (element['groupName'].startsWith('meterial')) {\r\n                element['storageMoves'].forEach(el => {\r\n                    el['storage']['numberAvailableUnits'] = el['numberAvailableUnits'];\r\n                });\r\n                arrMaterial.push(element);\r\n            }\r\n        });\r\n        delete val['storageMovesGroups'];\r\n        this.dataSource['loadedItems'] = val['loadedItems'];\r\n        delete val['loadedItems'];\r\n        this.putFirstData = val;\r\n        // this.dataSource = val;\r\n        if (arrTable.length) {\r\n            this.dataSource['usedItemsTable'] = arrTable;\r\n        }\r\n        if (arrNormal.length) {\r\n            this.dataSource['usedItemsNormal'] = arrNormal;\r\n        }\r\n        if (arrMaterial.length) {\r\n            this.dataSource['materialUsed'] = arrMaterial;\r\n        }\r\n        this.addWanted();\r\n        this.isNew = false;\r\n        this.beginPage = true;\r\n        this.isFormAvailable = true;\r\n    }\r\n    ngOnInit() {\r\n        this.addLoaded();\r\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n            if (params.get('id')) {\r\n                var id = +params.get('id');\r\n                this.beginPage = false;\r\n                this.localService.getLoading(id).pipe(take(1)).subscribe(val => {\r\n                    this.fillEdit(val);\r\n                    this.localService.findFreeShipmentCodes().pipe(take(1)).subscribe(val1 => {\r\n                        this.allShipmentCodes.next(val1.concat(val['shipmentCode']));\r\n                    });\r\n                    this.localService.findFreeArrivals().pipe(take(1)).subscribe(val2 => {\r\n                        this.allContainers.next(val2.concat(val['arrival']));\r\n                    });\r\n                });\r\n            }\r\n            else {\r\n                this.localService.findFreeShipmentCodes().pipe(take(1)).subscribe(val1 => {\r\n                    this.allShipmentCodes.next(val1);\r\n                });\r\n                this.localService.findFreeArrivals().pipe(take(1)).subscribe(val2 => {\r\n                    this.allContainers.next(val2);\r\n                });\r\n            }\r\n        });\r\n        this.isFormAvailable = true;\r\n        this.beginConfig = [\r\n            {\r\n                type: 'date',\r\n                label: $localize `Date`,\r\n                value: 'timeNow',\r\n                name: 'recordedTime',\r\n                options: 'withTime',\r\n                validations: [\r\n                    {\r\n                        name: 'required',\r\n                        validator: Validators.required,\r\n                        message: $localize `Date Required`,\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                type: 'select',\r\n                label: $localize `Shipment code`,\r\n                name: 'shipmentCode',\r\n                options: this.allShipmentCodes,\r\n                // disable: true,\r\n                collections: 'somewhere',\r\n                validations: [\r\n                    {\r\n                        name: 'required',\r\n                        validator: Validators.required,\r\n                        message: $localize `Shipment code Required`,\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                type: 'select',\r\n                label: $localize `Container`,\r\n                name: 'arrival',\r\n                options: this.allContainers,\r\n                // disable: true,\r\n                collections: 'somewhere',\r\n                validations: [\r\n                    {\r\n                        name: 'required',\r\n                        validator: Validators.required,\r\n                        message: $localize `Container Required`,\r\n                    }\r\n                ]\r\n            },\r\n            // {\r\n            //   type: 'bignotexpand',\r\n            //   label: 'Shipment code',\r\n            //   name: 'shipmentCode',\r\n            //   collections: [\r\n            //       {\r\n            //           type: 'input',\r\n            //           label: 'Code',\r\n            //           name: 'code',\r\n            //           inputType: 'numeric',\r\n            //           disable: true,\r\n            //           validations: [\r\n            //             {\r\n            //                 name: 'required',\r\n            //                 validator: Validators.required,\r\n            //                 message: 'Code Required',\r\n            //             }\r\n            //           ]\r\n            //       },\r\n            //       {\r\n            //           type: 'select',\r\n            //           label: 'Destination port',\r\n            //           name: 'portOfDischarge',\r\n            //           options: this.genral.getShippingPorts(),\r\n            //           validations: [\r\n            //                 {\r\n            //                     name: 'required',\r\n            //                     validator: Validators.required,\r\n            //                     message: 'Destination port Required',\r\n            //                 }\r\n            //             ]\r\n            //       },\r\n            //   ],\r\n            // },\r\n            // {\r\n            //   type: 'bignotexpand',\r\n            //   label: 'Container details',\r\n            //   name: 'containerDetails',\r\n            //   collections: [\r\n            //       {\r\n            //           type: 'input',\r\n            //           label: 'Container number',\r\n            //           name: 'containerNumber',\r\n            //           validations: [\r\n            //             {\r\n            //                 name: 'required',\r\n            //                 validator: Validators.required,\r\n            //                 message: 'Container number Required',\r\n            //             }\r\n            //           ]\r\n            //       },\r\n            //       {\r\n            //           type: 'input',\r\n            //           label: 'Seal number',\r\n            //           name: 'sealNumber',\r\n            //           validations: [\r\n            //             {\r\n            //                 name: 'required',\r\n            //                 validator: Validators.required,\r\n            //                 message: 'Seal number Required',\r\n            //             }\r\n            //           ]\r\n            //       },\r\n            //       {\r\n            //           type: 'selectNormal',\r\n            //           label: 'Container type',\r\n            //           name: 'containerType',\r\n            //         //   value: '20\\'',\r\n            //           options: this.genral.getShippingContainerType(),\r\n            //           validations: [\r\n            //             {\r\n            //                 name: 'required',\r\n            //                 validator: Validators.required,\r\n            //                 message: 'Container type Required',\r\n            //             }\r\n            //           ]\r\n            //       },\r\n            //   ],\r\n            // },\r\n            // {\r\n            //   type: 'bignotexpand',\r\n            //   label: 'Shiping details',\r\n            //   name: 'shipingDetails',\r\n            //   value: 'required',\r\n            //   collections: [\r\n            //       {\r\n            //           type: 'input',\r\n            //           label: 'Booking number',\r\n            //           name: 'bookingNumber',\r\n            //       },\r\n            //       {\r\n            //           type: 'input',\r\n            //           label: 'Vessel',\r\n            //           name: 'vessel',\r\n            //       },\r\n            //       {\r\n            //           type: 'input',\r\n            //           label: 'Shipping company',\r\n            //           name: 'shippingCompany',\r\n            //       },\r\n            //       {\r\n            //           type: 'select',\r\n            //           label: 'Loading port',\r\n            //           name: 'portOfLoading',\r\n            //           options: this.genral.getShippingPorts(),\r\n            //       },\r\n            //       {\r\n            //           type: 'date',\r\n            //           label: 'Etd',\r\n            //           name: 'etd',\r\n            //           // value: new Date()\r\n            //           validations: [\r\n            //             {\r\n            //                 name: 'required',\r\n            //                 validator: Validators.required,\r\n            //                 message: 'Etd Required',\r\n            //             }\r\n            //           ]\r\n            //       },\r\n            //       {\r\n            //           type: 'select',\r\n            //           label: 'Destination port',\r\n            //           name: 'portOfDischarge',\r\n            //           options: this.genral.getShippingPorts(),\r\n            //       },\r\n            //       {\r\n            //         type: 'date',\r\n            //         label: 'Eta',\r\n            //         name: 'eta',\r\n            //         // value: new Date()\r\n            //         validations: [\r\n            //             {\r\n            //                 name: 'required',\r\n            //                 validator: Validators.required,\r\n            //                 message: 'Eta Required',\r\n            //             }\r\n            //           ]\r\n            //       },\r\n            //   ],\r\n            // },\r\n        ];\r\n        this.preperChoosingPO();\r\n        this.oneClickOnlySubscription = this.oneClickChanged\r\n            .pipe(throttleTime(1100), distinctUntilChanged())\r\n            .subscribe(event => {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            this.onSubmitBoth();\r\n        });\r\n        this.navigationSubscription = this.router.events.subscribe((e) => {\r\n            // If it is a NavigationEnd event re-initalise the component\r\n            if (e instanceof NavigationEnd) {\r\n                this.beginPage = false;\r\n                this.isFormAvailable = false;\r\n                this.choosedPos = [];\r\n                this.dataSource = { usedItemsTable: [], usedItemsNormal: [], materialUsed: [] };\r\n                this.removeIds = [];\r\n                // this.removeIdsTable = [];\r\n                this.putFirstData = null;\r\n                this.preperChoosingPO();\r\n                this.cdRef.detectChanges();\r\n                this.beginPage = true;\r\n                this.localService.findFreeShipmentCodes().pipe(take(1)).subscribe(val => {\r\n                    this.allShipmentCodes.next(val);\r\n                });\r\n                this.localService.findFreeArrivals().pipe(take(1)).subscribe(val => {\r\n                    this.allContainers.next(val);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    addLoaded() {\r\n        this.regConfig = [\r\n            {\r\n                type: 'bigexpand',\r\n                name: 'materialUsed',\r\n                label: $localize `Material used`,\r\n                options: 'aloneNoAdd',\r\n                collections: [\r\n                    {\r\n                        type: 'materialUsage',\r\n                        // label: 'Transfer from',\r\n                        name: 'storageMoves',\r\n                        collections: [\r\n                            {\r\n                                type: 'selectgroup',\r\n                                inputType: 'supplierName',\r\n                                // options: this.localService.getAllPosRoastPacked(),\r\n                                disable: true,\r\n                                collections: [\r\n                                    {\r\n                                        type: 'select',\r\n                                        label: $localize `Supplier`,\r\n                                    },\r\n                                    {\r\n                                        type: 'select',\r\n                                        label: $localize `#PO`,\r\n                                        name: 'itemPo',\r\n                                        collections: 'somewhere',\r\n                                    },\r\n                                ]\r\n                            },\r\n                            {\r\n                                type: 'select',\r\n                                label: $localize `Item`,\r\n                                name: 'item',\r\n                                disable: true,\r\n                            },\r\n                            {\r\n                                type: 'date',\r\n                                label: $localize `Process date`,\r\n                                name: 'itemProcessDate',\r\n                                disable: true,\r\n                            },\r\n                            {\r\n                                type: 'input',\r\n                                label: $localize `Weight unit`,\r\n                                name: 'measureUnit',\r\n                                disable: true,\r\n                            },\r\n                            {\r\n                                type: 'bignotexpand',\r\n                                name: 'storage',\r\n                                collections: [\r\n                                    {\r\n                                        type: 'input',\r\n                                        label: $localize `Number of units`,\r\n                                        name: 'numberUnits',\r\n                                        disable: true,\r\n                                    },\r\n                                    {\r\n                                        type: 'input',\r\n                                        name: 'unitAmount',\r\n                                        label: $localize `Unit weight`,\r\n                                        disable: true,\r\n                                        //     collections: [\r\n                                        //         {\r\n                                        //             type: 'input',\r\n                                        //             label: 'Unit weight',\r\n                                        //             name: 'amount',\r\n                                        //         },\r\n                                        //         {\r\n                                        //             type: 'select',\r\n                                        //             label: 'Weight unit',\r\n                                        //             name: 'measureUnit',\r\n                                        //         },\r\n                                        //     ]\r\n                                    },\r\n                                    {\r\n                                        type: 'select',\r\n                                        label: $localize `Warehouse location`,\r\n                                        name: 'warehouseLocation',\r\n                                        disable: true,\r\n                                    },\r\n                                    {\r\n                                        type: 'input',\r\n                                        label: $localize `Number available units`,\r\n                                        name: 'numberAvailableUnits',\r\n                                        disable: true,\r\n                                    },\r\n                                ]\r\n                            },\r\n                        ],\r\n                    },\r\n                ]\r\n            },\r\n        ];\r\n    }\r\n    addNormal() {\r\n        this.regConfig.splice(0, 0, {\r\n            type: 'bigexpand',\r\n            name: 'usedItemsNormal',\r\n            label: $localize `Transfer from`,\r\n            options: 'aloneNoAdd',\r\n            collections: [\r\n                {\r\n                    type: 'tableWithInput',\r\n                    // label: 'Transfer from',\r\n                    name: 'storageMoves',\r\n                    options: 'numberUsedUnits',\r\n                    collections: [\r\n                        {\r\n                            type: 'input',\r\n                            label: $localize `#PO`,\r\n                            name: 'itemPoCodes',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'input',\r\n                            label: $localize `Supplier`,\r\n                            name: 'itemSuppliers',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'select',\r\n                            label: $localize `Item`,\r\n                            name: 'item',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'dateTime',\r\n                            label: $localize `Process date`,\r\n                            name: 'itemProcessDate',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'input',\r\n                            label: $localize `Weight unit`,\r\n                            name: 'measureUnit',\r\n                        },\r\n                        {\r\n                            type: 'bignotexpand',\r\n                            name: 'storage',\r\n                            collections: [\r\n                                {\r\n                                    type: 'input',\r\n                                    label: $localize `Number of units`,\r\n                                    name: 'numberUnits',\r\n                                    disable: true,\r\n                                },\r\n                                {\r\n                                    type: 'input',\r\n                                    name: 'unitAmount',\r\n                                    label: $localize `Unit weight`,\r\n                                    disable: true,\r\n                                    // collections: [\r\n                                    //     {\r\n                                    //         type: 'input',\r\n                                    //         label: 'Unit weight',\r\n                                    //         name: 'amount',\r\n                                    //     },\r\n                                    //     {\r\n                                    //         type: 'select',\r\n                                    //         label: 'Weight unit',\r\n                                    //         name: 'measureUnit',\r\n                                    //     },\r\n                                    // ]\r\n                                },\r\n                                {\r\n                                    type: 'select',\r\n                                    label: $localize `Warehouse location`,\r\n                                    name: 'warehouseLocation',\r\n                                    disable: true,\r\n                                },\r\n                                {\r\n                                    type: 'input',\r\n                                    label: $localize `Number available units`,\r\n                                    name: 'numberAvailableUnits',\r\n                                    disable: true,\r\n                                },\r\n                            ]\r\n                        },\r\n                    ],\r\n                },\r\n            ]\r\n        });\r\n    }\r\n    addTable() {\r\n        var index = (this.regConfig[0] && this.regConfig[0]['name'] === 'usedItemsNormal') ? 1 : 0;\r\n        this.regConfig.splice(index, 0, {\r\n            type: 'bigexpand',\r\n            name: 'usedItemsTable',\r\n            label: $localize `Transfer from`,\r\n            options: 'aloneNoAdd',\r\n            collections: [\r\n                {\r\n                    type: 'bignotexpand',\r\n                    name: 'storageMove',\r\n                    // label: 'Transfer from',\r\n                    options: 'aloneNoAdd',\r\n                    collections: [\r\n                        {\r\n                            type: 'input',\r\n                            label: $localize `#PO`,\r\n                            name: 'itemPoCodes',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'input',\r\n                            label: $localize `Supplier`,\r\n                            name: 'itemSuppliers',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'inputReadonlySelect',\r\n                            label: $localize `Item descrption`,\r\n                            name: 'item',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'date',\r\n                            label: $localize `Process date`,\r\n                            name: 'itemProcessDate',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'inputReadonly',\r\n                            label: $localize `Weight unit`,\r\n                            name: 'measureUnit',\r\n                            disable: true,\r\n                        },\r\n                        {\r\n                            type: 'inputReadonlySelect',\r\n                            label: $localize `Warehouse location`,\r\n                            name: 'warehouseLocation',\r\n                            disable: true,\r\n                        },\r\n                        // {\r\n                        //     type: 'inputReadonly',\r\n                        //     label: 'Empty container weight',\r\n                        //     name: 'containerWeight',\r\n                        //     disable: true,\r\n                        // },\r\n                        {\r\n                            type: 'arrayordinal',\r\n                            label: $localize `Unit weight`,\r\n                            name: 'amounts',\r\n                            inputType: 'choose',\r\n                            options: 3,\r\n                            collections: 30,\r\n                        },\r\n                    ]\r\n                },\r\n            ]\r\n        });\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n        this.allShipmentCodes.unsubscribe();\r\n        this.allContainers.unsubscribe();\r\n        this.oneClickOnlySubscription.unsubscribe();\r\n    }\r\n}\r\nCountinersLoadingComponent.ɵfac = function CountinersLoadingComponent_Factory(t) { return new (t || CountinersLoadingComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i3.CountinersService), i0.ɵɵdirectiveInject(i4.Genral), i0.ɵɵdirectiveInject(i5.MatDialog)); };\r\nCountinersLoadingComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CountinersLoadingComponent, selectors: [[\"countiners-loading\"]], viewQuery: function CountinersLoadingComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(_c0, 5);\r\n        i0.ɵɵviewQuery(_c1, 5);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formFirst = _t.first);\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formSecond = _t.first);\r\n    } }, decls: 4, vars: 2, consts: function () { let i18n_2; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_7619560701830330401$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS_3 = goog.getMsg(\"Loading\");\r\n        i18n_2 = MSG_EXTERNAL_7619560701830330401$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS_3;\r\n    }\r\n    else {\r\n        i18n_2 = $localize `:␟def755457793d5ad40597886d2d317bc5f415a2f␟7619560701830330401:Loading`;\r\n    } let i18n_4; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_1570156168541437739$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__5 = goog.getMsg(\"Loading information\");\r\n        i18n_4 = MSG_EXTERNAL_1570156168541437739$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__5;\r\n    }\r\n    else {\r\n        i18n_4 = $localize `:␟a501a30a80899642cd3fb9e694f6eb997286e0e0␟1570156168541437739:Loading information`;\r\n    } let i18n_6; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_2453918270401236823$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS___7 = goog.getMsg(\"Material to load\");\r\n        i18n_6 = MSG_EXTERNAL_2453918270401236823$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS___7;\r\n    }\r\n    else {\r\n        i18n_6 = $localize `:␟70461429e02bf0a7d625fcdd66bc2e371c583ff7␟2453918270401236823:Material to load`;\r\n    } let i18n_8; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_935187492052582731$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__9 = goog.getMsg(\"Submit\");\r\n        i18n_8 = MSG_EXTERNAL_935187492052582731$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__9;\r\n    }\r\n    else {\r\n        i18n_8 = $localize `:␟71c77bb8cecdf11ec3eead24dd1ba506573fa9cd␟935187492052582731:Submit`;\r\n    } let i18n_10; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_7808756054397155068$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__11 = goog.getMsg(\"Reset\");\r\n        i18n_10 = MSG_EXTERNAL_7808756054397155068$$SRC_APP_COUNTINERS_COUNTINERS_LOADING_COMPONENT_TS__11;\r\n    }\r\n    else {\r\n        i18n_10 = $localize `:␟06c663bf1474713f57551123a46b34318543b67d␟7808756054397155068:Reset`;\r\n    } return [[2, \"text-align\", \"center\"], i18n_2, [\"mat-stretch-tabs\", \"\", 4, \"ngIf\"], [\"class\", \"margin-top\", \"style\", \"text-align:right\", 4, \"ngIf\"], [\"mat-stretch-tabs\", \"\"], [\"mainLabel\", i18n_4, 3, \"fields\", \"putData\"], [\"first\", \"\"], [\"dynamicField\", \"\", 3, \"field\", \"group\"], [4, \"ngIf\"], [\"mainLabel\", i18n_6, 3, \"fields\", \"putData\"], [\"second\", \"\"], [1, \"margin-top\", 2, \"text-align\", \"right\"], [\"type\", \"button\", \"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"min-width\", \"150px\", \"margin-right\", \"45px\", 3, \"click\"], i18n_8, [\"type\", \"button\", \"mat-raised-button\", \"\", \"color\", \"primary\", 2, \"min-width\", \"150px\", 3, \"click\"], i18n_10]; }, template: function CountinersLoadingComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\", 0);\r\n        i0.ɵɵi18n(1, 1);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(2, CountinersLoadingComponent_ng_container_2_Template, 5, 5, \"ng-container\", 2);\r\n        i0.ɵɵtemplate(3, CountinersLoadingComponent_div_3_Template, 5, 0, \"div\", 3);\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.beginPage);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.isFormAvailable);\r\n    } }, directives: [i6.NgIf, i7.DynamicFormComponent, i8.DynamicFieldDirective, i9.MatButton], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}