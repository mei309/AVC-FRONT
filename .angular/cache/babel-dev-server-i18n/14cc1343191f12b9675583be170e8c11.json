{"ast":null,"code":"import { NavigationEnd } from '@angular/router';\nimport { ReplaySubject } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"./reports.service\";\nimport * as i3 from \"../genral.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../tables/date-range-select.component\";\nimport * as i6 from \"@angular/material/tabs\";\nimport * as i7 from \"../tables/search-group-details.component\";\nexport class ReceiptUsageComponent {\n  constructor(dialog, localService, genral, _Activatedroute, cdRef, router) {\n    this.dialog = dialog;\n    this.localService = localService;\n    this.genral = genral;\n    this._Activatedroute = _Activatedroute;\n    this.cdRef = cdRef;\n    this.router = router;\n    this.ItemsChangable = new ReplaySubject();\n    this.SuppliersChangable = new ReplaySubject();\n    this.tabIndex = 0;\n    this.columnsShow = [{\n      type: 'normal',\n      name: 'poCode',\n      label: \"PO#\",\n      search: 'normal'\n    }, {\n      type: 'stringComma',\n      name: 'supplier',\n      label: \"Supplier\",\n      search: 'selectObj',\n      options: this.SuppliersChangable\n    }, {\n      type: 'normal',\n      name: 'item',\n      label: \"Item\",\n      search: 'selectObj',\n      options: this.ItemsChangable\n    }, {\n      type: 'normal',\n      name: 'measureUnit',\n      label: \"Measure unit\",\n      search: 'normal'\n    }, {\n      type: 'date',\n      name: 'receiptDate',\n      label: \"Receipt date\",\n      search: 'dates'\n    }, {\n      type: 'decimalNumber',\n      name: 'importedAmount',\n      label: \"Receipt amount\",\n      search: 'normal'\n    }, {\n      type: 'arrayVal',\n      name: 'usedDates',\n      label: \"Used dates\",\n      search: 'dates'\n    }, {\n      type: 'decimalNumber',\n      name: 'usedAmount',\n      label: \"Used amount\",\n      search: 'normal'\n    }, {\n      type: 'decimalNumber',\n      name: 'balance',\n      label: \"Balance\",\n      search: 'normal'\n    }, {\n      type: 'arrayVal',\n      name: 'warehouses',\n      label: \"Warehouse\",\n      search: 'selectObjArr',\n      options: this.genral.getWearhouses()\n    }, {\n      type: 'currency',\n      name: 'unitPrice',\n      label: \"Unit price\",\n      search: 'object'\n    }, {\n      type: 'arrayVal',\n      name: 'bags',\n      label: \"Bags\",\n      search: 'normal'\n    }];\n  }\n\n  ngOnInit() {\n    this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n      if (params.get('number')) {\n        this.tabIndex = +params.get('number');\n      }\n    });\n\n    this.navigationSubscription = this.router.events.subscribe(e => {\n      // If it is a NavigationEnd event re-initalise the component\n      if (e instanceof NavigationEnd) {\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\n          if (params.get('number')) {\n            this.tabIndex = +params.get('number');\n          } else {\n            this.tabIndex = 0;\n          }\n\n          this.changedAndDate(this.tabIndex);\n        });\n      }\n    });\n  }\n\n  changed(event) {\n    this.changedAndDate(event);\n  }\n\n  setDateRange($event) {\n    this.dateRange = $event;\n    this.changedAndDate(this.tabIndex);\n  }\n\n  changedAndDate(event) {\n    switch (+event) {\n      case 0:\n        this.inventorySource = null;\n        this.localService.getReceiptUsage(this.dateRange, 'PRODUCT').pipe(take(1)).subscribe(value => {\n          this.inventorySource = value;\n        });\n        this.genral.getItemsCashew('').pipe(take(1)).subscribe(val => {\n          this.ItemsChangable.next(val);\n        });\n        this.genral.getSuppliersCashew().pipe(take(1)).subscribe(val => {\n          this.SuppliersChangable.next(val);\n        });\n        this.cdRef.detectChanges();\n        break;\n\n      case 1:\n        this.inventorySource = null;\n        this.localService.getReceiptUsage(this.dateRange, 'GENERAL').pipe(take(1)).subscribe(value => {\n          this.inventorySource = value;\n        });\n        this.genral.getItemsGeneral().pipe(take(1)).subscribe(val => {\n          this.ItemsChangable.next(val);\n        });\n        this.genral.getSuppliersGeneral().pipe(take(1)).subscribe(val => {\n          this.SuppliersChangable.next(val);\n        });\n        this.cdRef.detectChanges();\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.navigationSubscription) {\n      this.navigationSubscription.unsubscribe();\n    }\n\n    this.ItemsChangable.unsubscribe();\n    this.SuppliersChangable.unsubscribe();\n  }\n\n}\n\nReceiptUsageComponent.ɵfac = function ReceiptUsageComponent_Factory(t) {\n  return new (t || ReceiptUsageComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.ReportsService), i0.ɵɵdirectiveInject(i3.Genral), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.Router));\n};\n\nReceiptUsageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ReceiptUsageComponent,\n  selectors: [[\"app-receipt-usage\"]],\n  decls: 7,\n  vars: 3,\n  consts: function () {\n    let i18n_0;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_7715165267491433085$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_1 = goog.getMsg(\"Receipt Usage\");\n      i18n_0 = MSG_EXTERNAL_7715165267491433085$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_1;\n    } else {\n      i18n_0 = \"Receipt Usage\";\n    }\n\n    let i18n_2;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_6512948890889947614$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_3 = goog.getMsg(\"Cashew\");\n      i18n_2 = MSG_EXTERNAL_6512948890889947614$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_3;\n    } else {\n      i18n_2 = \"Cashew\";\n    }\n\n    let i18n_4;\n\n    if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\n      const MSG_EXTERNAL_6439365426343089851$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_5 = goog.getMsg(\"General\");\n      i18n_4 = MSG_EXTERNAL_6439365426343089851$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_5;\n    } else {\n      i18n_4 = \"General\";\n    }\n\n    return [[2, \"text-align\", \"center\"], i18n_0, [3, \"submitRange\"], [\"mat-stretch-tabs\", \"\", 1, \"spac-print\", 3, \"selectedIndex\", \"selectedIndexChange\"], [\"label\", i18n_2], [\"label\", i18n_4], [3, \"mainColumns\", \"detailsSource\"]];\n  },\n  template: function ReceiptUsageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵi18n(1, 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"date-range-select\", 2);\n      i0.ɵɵlistener(\"submitRange\", function ReceiptUsageComponent_Template_date_range_select_submitRange_2_listener($event) {\n        return ctx.setDateRange($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"mat-tab-group\", 3);\n      i0.ɵɵlistener(\"selectedIndexChange\", function ReceiptUsageComponent_Template_mat_tab_group_selectedIndexChange_3_listener($event) {\n        return ctx.tabIndex = $event;\n      })(\"selectedIndexChange\", function ReceiptUsageComponent_Template_mat_tab_group_selectedIndexChange_3_listener($event) {\n        return ctx.changed($event);\n      });\n      i0.ɵɵelement(4, \"mat-tab\", 4);\n      i0.ɵɵelement(5, \"mat-tab\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"search-group-details\", 6);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"selectedIndex\", ctx.tabIndex);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"mainColumns\", ctx.columnsShow)(\"detailsSource\", ctx.inventorySource);\n    }\n  },\n  directives: [i5.DateRangeSelect, i6.MatTabGroup, i6.MatTab, i7.SearchGroupDetailsComponent],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/isral/OneDrive/Documents/AVC-FRONT/src/app/reports/recipit-usage.component.ts"],"names":["NavigationEnd","ReplaySubject","take","i0","i1","i2","i3","i4","i5","i6","i7","ReceiptUsageComponent","constructor","dialog","localService","genral","_Activatedroute","cdRef","router","ItemsChangable","SuppliersChangable","tabIndex","columnsShow","type","name","label","search","options","getWearhouses","ngOnInit","paramMap","pipe","subscribe","params","get","navigationSubscription","events","e","changedAndDate","changed","event","setDateRange","$event","dateRange","inventorySource","getReceiptUsage","value","getItemsCashew","val","next","getSuppliersCashew","detectChanges","getItemsGeneral","getSuppliersGeneral","ngOnDestroy","unsubscribe","ɵfac","ReceiptUsageComponent_Factory","t","ɵɵdirectiveInject","MatDialog","ReportsService","Genral","ActivatedRoute","ChangeDetectorRef","Router","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","i18n_0","ngI18nClosureMode","MSG_EXTERNAL_7715165267491433085$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_1","goog","getMsg","i18n_2","MSG_EXTERNAL_6512948890889947614$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_3","i18n_4","MSG_EXTERNAL_6439365426343089851$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_5","template","ReceiptUsageComponent_Template","rf","ctx","ɵɵelementStart","ɵɵi18n","ɵɵelementEnd","ɵɵlistener","ReceiptUsageComponent_Template_date_range_select_submitRange_2_listener","ReceiptUsageComponent_Template_mat_tab_group_selectedIndexChange_3_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","directives","DateRangeSelect","MatTabGroup","MatTab","SearchGroupDetailsComponent","encapsulation"],"mappings":"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","sourcesContent":["import { NavigationEnd } from '@angular/router';\r\nimport { ReplaySubject } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/material/dialog\";\r\nimport * as i2 from \"./reports.service\";\r\nimport * as i3 from \"../genral.service\";\r\nimport * as i4 from \"@angular/router\";\r\nimport * as i5 from \"../tables/date-range-select.component\";\r\nimport * as i6 from \"@angular/material/tabs\";\r\nimport * as i7 from \"../tables/search-group-details.component\";\r\nexport class ReceiptUsageComponent {\r\n    constructor(dialog, localService, genral, _Activatedroute, cdRef, router) {\r\n        this.dialog = dialog;\r\n        this.localService = localService;\r\n        this.genral = genral;\r\n        this._Activatedroute = _Activatedroute;\r\n        this.cdRef = cdRef;\r\n        this.router = router;\r\n        this.ItemsChangable = new ReplaySubject();\r\n        this.SuppliersChangable = new ReplaySubject();\r\n        this.tabIndex = 0;\r\n        this.columnsShow = [\r\n            {\r\n                type: 'normal',\r\n                name: 'poCode',\r\n                label: $localize `PO#`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'stringComma',\r\n                name: 'supplier',\r\n                label: $localize `Supplier`,\r\n                search: 'selectObj',\r\n                options: this.SuppliersChangable,\r\n            },\r\n            {\r\n                type: 'normal',\r\n                name: 'item',\r\n                label: $localize `Item`,\r\n                search: 'selectObj',\r\n                options: this.ItemsChangable,\r\n            },\r\n            {\r\n                type: 'normal',\r\n                name: 'measureUnit',\r\n                label: $localize `Measure unit`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'date',\r\n                name: 'receiptDate',\r\n                label: $localize `Receipt date`,\r\n                search: 'dates',\r\n            },\r\n            {\r\n                type: 'decimalNumber',\r\n                name: 'importedAmount',\r\n                label: $localize `Receipt amount`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'arrayVal',\r\n                name: 'usedDates',\r\n                label: $localize `Used dates`,\r\n                search: 'dates',\r\n            },\r\n            {\r\n                type: 'decimalNumber',\r\n                name: 'usedAmount',\r\n                label: $localize `Used amount`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'decimalNumber',\r\n                name: 'balance',\r\n                label: $localize `Balance`,\r\n                search: 'normal',\r\n            },\r\n            {\r\n                type: 'arrayVal',\r\n                name: 'warehouses',\r\n                label: $localize `Warehouse`,\r\n                search: 'selectObjArr',\r\n                options: this.genral.getWearhouses(),\r\n            },\r\n            {\r\n                type: 'currency',\r\n                name: 'unitPrice',\r\n                label: $localize `Unit price`,\r\n                search: 'object',\r\n            },\r\n            {\r\n                type: 'arrayVal',\r\n                name: 'bags',\r\n                label: $localize `Bags`,\r\n                search: 'normal',\r\n            },\r\n        ];\r\n    }\r\n    ngOnInit() {\r\n        this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n            if (params.get('number')) {\r\n                this.tabIndex = +params.get('number');\r\n            }\r\n        });\r\n        this.navigationSubscription = this.router.events.subscribe((e) => {\r\n            // If it is a NavigationEnd event re-initalise the component\r\n            if (e instanceof NavigationEnd) {\r\n                this._Activatedroute.paramMap.pipe(take(1)).subscribe(params => {\r\n                    if (params.get('number')) {\r\n                        this.tabIndex = +params.get('number');\r\n                    }\r\n                    else {\r\n                        this.tabIndex = 0;\r\n                    }\r\n                    this.changedAndDate(this.tabIndex);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    changed(event) {\r\n        this.changedAndDate(event);\r\n    }\r\n    setDateRange($event) {\r\n        this.dateRange = $event;\r\n        this.changedAndDate(this.tabIndex);\r\n    }\r\n    changedAndDate(event) {\r\n        switch (+event) {\r\n            case 0:\r\n                this.inventorySource = null;\r\n                this.localService.getReceiptUsage(this.dateRange, 'PRODUCT').pipe(take(1)).subscribe(value => {\r\n                    this.inventorySource = value;\r\n                });\r\n                this.genral.getItemsCashew('').pipe(take(1)).subscribe(val => {\r\n                    this.ItemsChangable.next(val);\r\n                });\r\n                this.genral.getSuppliersCashew().pipe(take(1)).subscribe(val => {\r\n                    this.SuppliersChangable.next(val);\r\n                });\r\n                this.cdRef.detectChanges();\r\n                break;\r\n            case 1:\r\n                this.inventorySource = null;\r\n                this.localService.getReceiptUsage(this.dateRange, 'GENERAL').pipe(take(1)).subscribe(value => {\r\n                    this.inventorySource = value;\r\n                });\r\n                this.genral.getItemsGeneral().pipe(take(1)).subscribe(val => {\r\n                    this.ItemsChangable.next(val);\r\n                });\r\n                this.genral.getSuppliersGeneral().pipe(take(1)).subscribe(val => {\r\n                    this.SuppliersChangable.next(val);\r\n                });\r\n                this.cdRef.detectChanges();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    ngOnDestroy() {\r\n        if (this.navigationSubscription) {\r\n            this.navigationSubscription.unsubscribe();\r\n        }\r\n        this.ItemsChangable.unsubscribe();\r\n        this.SuppliersChangable.unsubscribe();\r\n    }\r\n}\r\nReceiptUsageComponent.ɵfac = function ReceiptUsageComponent_Factory(t) { return new (t || ReceiptUsageComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.ReportsService), i0.ɵɵdirectiveInject(i3.Genral), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.Router)); };\r\nReceiptUsageComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ReceiptUsageComponent, selectors: [[\"app-receipt-usage\"]], decls: 7, vars: 3, consts: function () { let i18n_0; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_7715165267491433085$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_1 = goog.getMsg(\"Receipt Usage\");\r\n        i18n_0 = MSG_EXTERNAL_7715165267491433085$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_1;\r\n    }\r\n    else {\r\n        i18n_0 = $localize `:␟12e6014a7ca1a2411f8618554df5096f373f3832␟7715165267491433085:Receipt Usage`;\r\n    } let i18n_2; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_6512948890889947614$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_3 = goog.getMsg(\"Cashew\");\r\n        i18n_2 = MSG_EXTERNAL_6512948890889947614$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_3;\r\n    }\r\n    else {\r\n        i18n_2 = $localize `:␟254fec480fcac5e3ac9d48d5d02312080a8c91e3␟6512948890889947614:Cashew`;\r\n    } let i18n_4; if (typeof ngI18nClosureMode !== \"undefined\" && ngI18nClosureMode) {\r\n        const MSG_EXTERNAL_6439365426343089851$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_5 = goog.getMsg(\"General\");\r\n        i18n_4 = MSG_EXTERNAL_6439365426343089851$$SRC_APP_REPORTS_RECIPIT_USAGE_COMPONENT_TS_5;\r\n    }\r\n    else {\r\n        i18n_4 = $localize `:␟3d53f64033c4b76fdc1076ba15955d913209866c␟6439365426343089851:General`;\r\n    } return [[2, \"text-align\", \"center\"], i18n_0, [3, \"submitRange\"], [\"mat-stretch-tabs\", \"\", 1, \"spac-print\", 3, \"selectedIndex\", \"selectedIndexChange\"], [\"label\", i18n_2], [\"label\", i18n_4], [3, \"mainColumns\", \"detailsSource\"]]; }, template: function ReceiptUsageComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\", 0);\r\n        i0.ɵɵi18n(1, 1);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"date-range-select\", 2);\r\n        i0.ɵɵlistener(\"submitRange\", function ReceiptUsageComponent_Template_date_range_select_submitRange_2_listener($event) { return ctx.setDateRange($event); });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(3, \"mat-tab-group\", 3);\r\n        i0.ɵɵlistener(\"selectedIndexChange\", function ReceiptUsageComponent_Template_mat_tab_group_selectedIndexChange_3_listener($event) { return ctx.tabIndex = $event; })(\"selectedIndexChange\", function ReceiptUsageComponent_Template_mat_tab_group_selectedIndexChange_3_listener($event) { return ctx.changed($event); });\r\n        i0.ɵɵelement(4, \"mat-tab\", 4);\r\n        i0.ɵɵelement(5, \"mat-tab\", 5);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(6, \"search-group-details\", 6);\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"selectedIndex\", ctx.tabIndex);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"mainColumns\", ctx.columnsShow)(\"detailsSource\", ctx.inventorySource);\r\n    } }, directives: [i5.DateRangeSelect, i6.MatTabGroup, i6.MatTab, i7.SearchGroupDetailsComponent], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}